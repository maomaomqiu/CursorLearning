# åŠ¨æ€ç³»ç»Ÿæç¤ºæ³¨å…¥å®Œæ•´æŒ‡å—

> Everything Claude Code - Dynamic System Prompt Injection æ·±åº¦è§£æ

**ç”Ÿæˆæ—¶é—´**: 2026-02-21 18:19:49
**åŸæ–‡æ¥æº**: `github.com/affaan-m/everything-claude-code`
**åˆ†æèŒƒå›´**: æ¦‚å¿µã€å®ç°ã€ä½¿ç”¨åœºæ™¯ã€æœ€ä½³å®è·µ

---

## â“ å¿«é€Ÿé—®ç­”

**Q: åŠ¨æ€ç³»ç»Ÿæç¤ºæ³¨å…¥æ˜¯ä¸€ä¸ª skill å—ï¼Ÿ**

**A: ä¸æ˜¯ï¼Œå®ƒæ˜¯ä¸€ç§ä½¿ç”¨æŠ€æœ¯/æ¨¡å¼**
- âŒ ä¸æ˜¯ç‹¬ç«‹çš„ skill
- âœ… æ˜¯ä¸€ç§ä½¿ç”¨ `contexts/` ç›®å½• + CLI å‚æ•°çš„æŠ€æœ¯
- ğŸ“ åŒ…å« 3 ä¸ªé¢„å®šä¹‰ä¸Šä¸‹æ–‡æ–‡ä»¶
- ğŸ¯ é€šè¿‡ `--system-prompt` å‚æ•°åŠ¨æ€æ³¨å…¥

**æ ¸å¿ƒæ€æƒ³**:
```
æ ¹æ®ä»»åŠ¡ç±»å‹åŠ¨æ€åˆ‡æ¢ Claude çš„è¡Œä¸ºæ¨¡å¼ï¼Œè€Œä¸æ˜¯æ¯æ¬¡åŠ è½½æ‰€æœ‰è§„åˆ™
```

---

## ç›®å½•

- [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
- [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)
- [é¢„å®šä¹‰ä¸Šä¸‹æ–‡](#é¢„å®šä¹‰ä¸Šä¸‹æ–‡)
- [ä½¿ç”¨æ–¹å¼](#ä½¿ç”¨æ–¹å¼)
- [æƒé™å±‚çº§](#æƒé™å±‚çº§)
- [å®é™…åœºæ™¯](#å®é™…åœºæ™¯)
- [è‡ªå®šä¹‰ä¸Šä¸‹æ–‡](#è‡ªå®šä¹‰ä¸Šä¸‹æ–‡)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å¯¹æ¯”åˆ†æ](#å¯¹æ¯”åˆ†æ)
- [é«˜çº§ç”¨æ³•](#é«˜çº§ç”¨æ³•)

---

## æ ¸å¿ƒæ¦‚å¿µ

### ä»€ä¹ˆæ˜¯åŠ¨æ€ç³»ç»Ÿæç¤ºæ³¨å…¥ï¼Ÿ

**å®šä¹‰**: ä½¿ç”¨ Claude CLI çš„ `--system-prompt` å‚æ•°ï¼Œåœ¨å¯åŠ¨ä¼šè¯æ—¶åŠ¨æ€æ³¨å…¥ç‰¹å®šçš„ç³»ç»Ÿæç¤ºï¼Œè€Œä¸æ˜¯ä¾èµ–å§‹ç»ˆåŠ è½½çš„å…¨å±€é…ç½®æ–‡ä»¶ã€‚

**æ ¸å¿ƒæœºåˆ¶**:

```mermaid
graph LR
    A[é€‰æ‹©ä»»åŠ¡ç±»å‹] --> B[é€‰æ‹©å¯¹åº”ä¸Šä¸‹æ–‡æ–‡ä»¶]
    B --> C[é€šè¿‡ --system-prompt æ³¨å…¥]
    C --> D[Claude è·å¾—ç‰¹å®šè¡Œä¸ºæŒ‡ä»¤]
    D --> E[æŒ‰ç…§ä¸Šä¸‹æ–‡æ‰§è¡Œä»»åŠ¡]
```

### è§£å†³çš„é—®é¢˜

#### ä¼ ç»Ÿæ–¹å¼çš„å±€é™

**å…¨å±€é…ç½®æ–‡ä»¶** (å§‹ç»ˆåŠ è½½):

```
CLAUDE.md (ç”¨æˆ·çº§)
    â†“ æ¯æ¬¡ä¼šè¯éƒ½åŠ è½½
.claude/rules/ (é¡¹ç›®çº§)
    â†“ æ¯æ¬¡ä¼šè¯éƒ½åŠ è½½
æ‰€æœ‰è§„åˆ™å’ŒæŒ‡ä»¤
    â†“ é—®é¢˜
- æ— æ³•æ ¹æ®ä»»åŠ¡ç±»å‹è°ƒæ•´
- æµªè´¹ token åŠ è½½ä¸ç›¸å…³æŒ‡ä»¤
- è¡Œä¸ºæ¨¡å¼å›ºå®š
- ä¸Šä¸‹æ–‡çª—å£è¢«å ç”¨
```

**åŠ¨æ€æ³¨å…¥** (æŒ‰éœ€åŠ è½½):

```
ä»»åŠ¡ç±»å‹è¯†åˆ«
    â†“ æ ¹æ®éœ€æ±‚é€‰æ‹©
ä»…åŠ è½½ç›¸å…³ä¸Šä¸‹æ–‡
    â†“ ä¼˜åŠ¿
- ç²¾ç¡®çš„è¡Œä¸ºæ§åˆ¶
- èŠ‚çœ token
- çµæ´»åˆ‡æ¢æ¨¡å¼
- ä¸Šä¸‹æ–‡çª—å£é«˜æ•ˆåˆ©ç”¨
```

### è®¾è®¡ç†å¿µ

> **"å¤–ç§‘æ‰‹æœ¯å¼çš„ä¸Šä¸‹æ–‡åŠ è½½"** - åªåŠ è½½å½“å‰ä»»åŠ¡çœŸæ­£éœ€è¦çš„æŒ‡ä»¤

**æ ¸å¿ƒåŸåˆ™**:

1. **æŒ‰éœ€åŠ è½½** - ä¸åŒä»»åŠ¡ï¼Œä¸åŒä¸Šä¸‹æ–‡
2. **æ¨¡å¼åˆ‡æ¢** - å¿«é€Ÿåœ¨å¼€å‘/å®¡æŸ¥/ç ”ç©¶é—´åˆ‡æ¢
3. **Token ä¼˜åŒ–** - é¿å…åŠ è½½æ— å…³æŒ‡ä»¤
4. **è¡Œä¸ºä¸“æ³¨** - æ¯ç§æ¨¡å¼æœ‰æ˜ç¡®çš„ä¼˜å…ˆçº§

---

## æ–‡ä»¶ç»“æ„

### åœ¨ Repo ä¸­çš„ä½ç½®

```
everything-claude-code/
â”œâ”€â”€ contexts/                    â† ä¸Šä¸‹æ–‡ç›®å½•
â”‚   â”œâ”€â”€ dev.md                  â† å¼€å‘æ¨¡å¼ (21 è¡Œ)
â”‚   â”œâ”€â”€ review.md               â† ä»£ç å®¡æŸ¥æ¨¡å¼ (23 è¡Œ)
â”‚   â””â”€â”€ research.md             â† ç ”ç©¶æ¢ç´¢æ¨¡å¼ (27 è¡Œ)
â”‚
â”œâ”€â”€ the-longform-guide.md       â† æ–‡æ¡£å¼•ç”¨ï¼ˆç¬¬ 54-75 è¡Œï¼‰
â””â”€â”€ README.md                   â† ç»“æ„è¯´æ˜ï¼ˆç¬¬ 320-323 è¡Œï¼‰
```

### æ–‡ä»¶ç‰¹ç‚¹

**ç²¾ç®€è®¾è®¡**:
- æ¯ä¸ªæ–‡ä»¶ < 30 è¡Œ
- Markdown æ ¼å¼
- æ¸…æ™°çš„ç»“æ„
- å¯è¯»æ€§å¼º

**æ ‡å‡†ç»“æ„**:
```markdown
# [æ¨¡å¼åç§°] Context

Mode: [æ¨¡å¼ç±»å‹]
Focus: [å…³æ³¨é‡ç‚¹]

## Behavior
[è¡Œä¸ºæŒ‡ä»¤åˆ—è¡¨]

## [æ¨¡å¼ç‰¹å®šç« èŠ‚]
[è¯¦ç»†æŒ‡ä»¤]

## Tools to favor
[æ¨èå·¥å…·]

## Output
[è¾“å‡ºè¦æ±‚]
```

---

## é¢„å®šä¹‰ä¸Šä¸‹æ–‡

### 1. dev.md - å¼€å‘æ¨¡å¼

**æ–‡ä»¶è·¯å¾„**: `contexts/dev.md`

**å®Œæ•´å†…å®¹**:

```markdown
# Development Context

Mode: Active development
Focus: Implementation, coding, building features

## Behavior
- Write code first, explain after
- Prefer working solutions over perfect solutions
- Run tests after changes
- Keep commits atomic

## Priorities
1. Get it working
2. Get it right
3. Get it clean

## Tools to favor
- Edit, Write for code changes
- Bash for running tests/builds
- Grep, Glob for finding code
```

**é€‚ç”¨åœºæ™¯**:
- âœ… å®ç°æ–°åŠŸèƒ½
- âœ… ä¿®å¤ bug
- âœ… ç¼–å†™ä»£ç 
- âœ… å¿«é€Ÿè¿­ä»£

**è¡Œä¸ºç‰¹ç‚¹**:
- ğŸš€ å¿«é€Ÿè¡ŒåŠ¨ï¼Œå…ˆå®ç°åè§£é‡Š
- ğŸ¯ ä¼˜å…ˆå¯å·¥ä½œçš„æ–¹æ¡ˆ
- ğŸ§ª ä¿®æ”¹åè‡ªåŠ¨è¿è¡Œæµ‹è¯•
- ğŸ“¦ ä¿æŒæäº¤åŸå­åŒ–

**æ•ˆæœ**:
```
å¼€å‘æ¨¡å¼ä¸‹çš„ Claudeï¼š
"æˆ‘ä¼šå…ˆå®ç°åŠŸèƒ½ï¼Œç„¶åè¿è¡Œæµ‹è¯•éªŒè¯ã€‚ä»£ç å¦‚ä¸‹ï¼š..."

vs

é»˜è®¤æ¨¡å¼ä¸‹çš„ Claudeï¼š
"è®©æˆ‘å…ˆè§£é‡Šä¸€ä¸‹å®ç°æ€è·¯... [é•¿ç¯‡è§£é‡Š] ...ç„¶åæˆ‘ä»¬æ¥çœ‹ä»£ç ..."
```

---

### 2. review.md - ä»£ç å®¡æŸ¥æ¨¡å¼

**æ–‡ä»¶è·¯å¾„**: `contexts/review.md`

**å®Œæ•´å†…å®¹**:

```markdown
# Code Review Context

Mode: PR review, code analysis
Focus: Quality, security, maintainability

## Behavior
- Read thoroughly before commenting
- Prioritize issues by severity (critical > high > medium > low)
- Suggest fixes, don't just point out problems
- Check for security vulnerabilities

## Review Checklist
- [ ] Logic errors
- [ ] Edge cases
- [ ] Error handling
- [ ] Security (injection, auth, secrets)
- [ ] Performance
- [ ] Readability
- [ ] Test coverage

## Output Format
Group findings by file, severity first
```

**é€‚ç”¨åœºæ™¯**:
- âœ… PR å®¡æŸ¥
- âœ… ä»£ç è´¨é‡æ£€æŸ¥
- âœ… å®‰å…¨å®¡è®¡
- âœ… æ¶æ„è¯„ä¼°

**è¡Œä¸ºç‰¹ç‚¹**:
- ğŸ” å½»åº•é˜…è¯»åå†è¯„è®º
- ğŸ¯ æŒ‰ä¸¥é‡ç¨‹åº¦ä¼˜å…ˆæ’åº
- ğŸ’¡ æä¾›ä¿®å¤å»ºè®®ï¼Œä¸åªæ˜¯æŒ‡å‡ºé—®é¢˜
- ğŸ›¡ï¸ é‡ç‚¹æ£€æŸ¥å®‰å…¨æ¼æ´

**è¾“å‡ºæ ¼å¼**:
```markdown
## src/auth.js

### Critical
- Line 45: SQL injection vulnerability in login query
  Fix: Use parameterized queries

### High
- Line 67: Missing authentication check
  Fix: Add auth middleware

### Medium
- Line 89: Error message exposes internal details
  Fix: Use generic error messages

## src/api.js
...
```

---

### 3. research.md - ç ”ç©¶æ¢ç´¢æ¨¡å¼

**æ–‡ä»¶è·¯å¾„**: `contexts/research.md`

**å®Œæ•´å†…å®¹**:

```markdown
# Research Context

Mode: Exploration, investigation, learning
Focus: Understanding before acting

## Behavior
- Read widely before concluding
- Ask clarifying questions
- Document findings as you go
- Don't write code until understanding is clear

## Research Process
1. Understand the question
2. Explore relevant code/docs
3. Form hypothesis
4. Verify with evidence
5. Summarize findings

## Tools to favor
- Read for understanding code
- Grep, Glob for finding patterns
- WebSearch, WebFetch for external docs
- Task with Explore agent for codebase questions

## Output
Findings first, recommendations second
```

**é€‚ç”¨åœºæ™¯**:
- âœ… ç†è§£ä»£ç åº“
- âœ… è°ƒæŸ¥é—®é¢˜
- âœ… å­¦ä¹ æ–°æŠ€æœ¯
- âœ… æ¶æ„åˆ†æ

**è¡Œä¸ºç‰¹ç‚¹**:
- ğŸ“š è¡ŒåŠ¨å‰å…ˆç†è§£
- â“ æå‡ºæ¾„æ¸…é—®é¢˜
- ğŸ“ è¾¹ç ”ç©¶è¾¹è®°å½•
- ğŸš« ç†è§£æ¸…æ¥šå‰ä¸å†™ä»£ç 

**ç ”ç©¶æµç¨‹**:
```
1. ç†è§£é—®é¢˜ â†’ "ä½ æƒ³äº†è§£ä»€ä¹ˆï¼Ÿ"
2. æ¢ç´¢ä»£ç /æ–‡æ¡£ â†’ [å¹¿æ³›é˜…è¯»]
3. å½¢æˆå‡è®¾ â†’ "åŸºäºæˆ‘çš„å‘ç°ï¼Œæˆ‘è®¤ä¸º..."
4. éªŒè¯è¯æ® â†’ [æ£€æŸ¥ç›¸å…³ä»£ç ]
5. æ€»ç»“å‘ç° â†’ "ç»“è®ºï¼š..."
```

---

## ä½¿ç”¨æ–¹å¼

### åŸºç¡€ç”¨æ³•

**å‘½ä»¤è¯­æ³•**:
```bash
claude --system-prompt "$(cat <context-file>)"
```

**ä¸‰ç§æ¨¡å¼**:

```bash
# 1. å¼€å‘æ¨¡å¼
claude --system-prompt "$(cat contexts/dev.md)"

# 2. ä»£ç å®¡æŸ¥æ¨¡å¼
claude --system-prompt "$(cat contexts/review.md)"

# 3. ç ”ç©¶æ¨¡å¼
claude --system-prompt "$(cat contexts/research.md)"
```

**å·¥ä½œåŸç†**:

```bash
$(cat contexts/dev.md)
    â†“ Shell å‘½ä»¤æ›¿æ¢
[è¯»å–æ–‡ä»¶å†…å®¹]
    â†“ ä½œä¸ºå­—ç¬¦ä¸²ä¼ é€’
--system-prompt "..."
    â†“ Claude CLI å¤„ç†
æ³¨å…¥åˆ°ç³»ç»Ÿæç¤ºä¸­
    â†“ ä¼šè¯å¼€å§‹
Claude æŒ‰ç…§ä¸Šä¸‹æ–‡è¡Œä¸º
```

### æ¨èè®¾ç½® - Shell åˆ«å

**é…ç½®æ–‡ä»¶**: `~/.bashrc` æˆ– `~/.zshrc`

```bash
# åŠ¨æ€ç³»ç»Ÿæç¤ºæ³¨å…¥åˆ«å
alias claude-dev='claude --system-prompt "$(cat ~/.claude/contexts/dev.md)"'
alias claude-review='claude --system-prompt "$(cat ~/.claude/contexts/review.md)"'
alias claude-research='claude --system-prompt "$(cat ~/.claude/contexts/research.md)"'
```

**ä½¿ç”¨ç¤ºä¾‹**:

```bash
# å¼€å‘å·¥ä½œ
cd ~/projects/myapp
claude-dev

# å®¡æŸ¥ PR
cd ~/projects/myapp
git checkout pr-123
claude-review

# ç ”ç©¶ä»£ç åº“
cd ~/projects/new-library
claude-research
```

### å¤šä¸Šä¸‹æ–‡ç»„åˆ

**ç»„åˆå¤šä¸ªä¸Šä¸‹æ–‡æ–‡ä»¶**:

```bash
# å¼€å‘ + é¡¹ç›®ç‰¹å®šè§„åˆ™
claude --system-prompt "$(cat ~/.claude/contexts/dev.md)" \
      --system-prompt "$(cat ./PROJECT-RULES.md)"

# å®¡æŸ¥ + å®‰å…¨æ¸…å•
claude --system-prompt "$(cat ~/.claude/contexts/review.md)" \
      --system-prompt "$(cat ~/.claude/security-checklist.md)"
```

**åŠ è½½é¡ºåº**:
```
ç¬¬ä¸€ä¸ª --system-prompt
    â†“ è¿½åŠ 
ç¬¬äºŒä¸ª --system-prompt
    â†“ è¿½åŠ 
ç¬¬ä¸‰ä¸ª --system-prompt
    â†“ åˆå¹¶åæ³¨å…¥
```

---

## æƒé™å±‚çº§

### æç¤ºæƒé™ç³»ç»Ÿ

Claude æœ‰ä¸€ä¸ªæç¤ºæƒé™å±‚çº§ç³»ç»Ÿï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  System Prompt                  â”‚  â† æœ€é«˜æƒé™
â”‚  (--system-prompt)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ ä¼˜å…ˆäº
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Messages                  â”‚  â† ä¸­ç­‰æƒé™
â”‚  (ä½ çš„è¾“å…¥)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ ä¼˜å…ˆäº
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tool Results                   â”‚  â† æœ€ä½æƒé™
â”‚  (Read, Grep ç­‰)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æƒé™ç¤ºä¾‹

**åœºæ™¯**: ä»£ç é£æ ¼å†²çª

```markdown
**System Prompt** (dev.md):
"Prefer working solutions over perfect solutions"

**User Message**:
"è¯·å®Œç¾åœ°å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæ¯ä¸ªç»†èŠ‚éƒ½è¦è€ƒè™‘"

**Tool Result** (Read CLAUDE.md):
"ä»£ç å¿…é¡»å®Œç¾ç¬¦åˆæ‰€æœ‰æœ€ä½³å®è·µ"

ç»“æœï¼šClaude ä¼šä¼˜å…ˆéµå¾ª System Promptï¼Œ
      å®ç°å¯å·¥ä½œçš„æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯è¿½æ±‚å®Œç¾
```

**åœºæ™¯**: è¡Œä¸ºæ¨¡å¼å†²çª

```markdown
**System Prompt** (review.md):
"Read thoroughly before commenting"

**User Message**:
"å¿«é€Ÿçœ‹ä¸€ä¸‹è¿™ä¸ª PR"

**Tool Result**:
[PR çš„ diff å†…å®¹]

ç»“æœï¼šClaude ä¼šå½»åº•é˜…è¯» PRï¼Œå³ä½¿ä½ è¯´"å¿«é€Ÿ"ï¼Œ
      å› ä¸º System Prompt ä¼˜å…ˆçº§æ›´é«˜
```

### ä¸ºä»€ä¹ˆè¿™ä¸ªè®¾è®¡é‡è¦ï¼Ÿ

**ç¨³å®šæ€§**:
- System Prompt æä¾›ä¸€è‡´çš„è¡Œä¸ºåŸºå‡†
- ç”¨æˆ·ä¸´æ—¶è¯·æ±‚ä¸ä¼šç ´åæ¨¡å¼
- ç¡®ä¿ä¸“ä¸šå·¥ä½œæµç¨‹

**çµæ´»æ€§**:
- ç”¨æˆ·ä»å¯é€šè¿‡æ˜ç¡®æŒ‡ä»¤è¦†ç›–
- ä½†éœ€è¦éå¸¸æ˜ç¡®çš„è¡¨è¿°
- ä¿æŠ¤æ ¸å¿ƒè¡Œä¸ºæ¨¡å¼

---

## å®é™…åœºæ™¯

### åœºæ™¯ 1: å¿«é€ŸåŠŸèƒ½å¼€å‘

**ä»»åŠ¡**: å®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½

**å¯åŠ¨**:
```bash
cd ~/projects/webapp
claude-dev
```

**å¯¹è¯æµç¨‹**:

```
You: å®ç° JWT è®¤è¯

Claude (dev æ¨¡å¼):
"æˆ‘ä¼šå…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œç„¶åæµ‹è¯•ã€‚ä»£ç å¦‚ä¸‹ï¼š

[ç›´æ¥ç»™å‡ºå®ç°ä»£ç ]

ç°åœ¨è¿è¡Œæµ‹è¯•éªŒè¯..."

[æ‰§è¡Œ] npm test

âœ… æµ‹è¯•é€šè¿‡ã€‚åŠŸèƒ½å·²å®ç°ã€‚

éœ€è¦æˆ‘è§£é‡Šå®ç°ç»†èŠ‚å—ï¼Ÿ"
```

**vs é»˜è®¤æ¨¡å¼**:

```
You: å®ç° JWT è®¤è¯

Claude (é»˜è®¤æ¨¡å¼):
"è®©æˆ‘å…ˆè§£é‡Š JWT çš„å·¥ä½œåŸç†...

[é•¿ç¯‡è§£é‡Š]

ç°åœ¨æˆ‘ä»¬æ¥çœ‹å®ç°æ–¹æ¡ˆ...

[å¤šä¸ªé€‰é¡¹å¯¹æ¯”]

æ¨èä½¿ç”¨æ–¹æ¡ˆ Aï¼Œå› ä¸º...

[æ›´å¤šè§£é‡Š]

ä»£ç å¦‚ä¸‹..."
```

**dev æ¨¡å¼ä¼˜åŠ¿**:
- â±ï¸ èŠ‚çœæ—¶é—´ï¼šç›´æ¥ç»™å‡ºå®ç°
- ğŸ¯ èšç„¦ç›®æ ‡ï¼šä»£ç ä¼˜å…ˆ
- ğŸ§ª å¿«é€ŸéªŒè¯ï¼šç«‹å³æµ‹è¯•

---

### åœºæ™¯ 2: PR å®¡æŸ¥

**ä»»åŠ¡**: å®¡æŸ¥è®¤è¯æ¨¡å—çš„ PR

**å¯åŠ¨**:
```bash
cd ~/projects/webapp
git checkout pr-456
claude-review
```

**å¯¹è¯æµç¨‹**:

```
You: å®¡æŸ¥è¿™ä¸ª PR çš„å®‰å…¨æ€§

Claude (review æ¨¡å¼):
"æˆ‘ä¼šå½»åº•å®¡æŸ¥ä»£ç ï¼Œé‡ç‚¹å…³æ³¨å®‰å…¨é—®é¢˜ã€‚

æ­£åœ¨é˜…è¯»å˜æ›´..."

[è¯»å–æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶]

"å®¡æŸ¥å®Œæˆã€‚å‘ç°ä»¥ä¸‹é—®é¢˜ï¼š

## src/auth/login.js

### Critical ğŸ”´
- Line 45: SQL injection vulnerability
  å½“å‰ä»£ç ï¼š
  \`\`\`javascript
  const query = \`SELECT * FROM users WHERE email = '\${email}'\`;
  \`\`\`

  ä¿®å¤å»ºè®®ï¼š
  \`\`\`javascript
  const query = 'SELECT * FROM users WHERE email = ?';
  db.query(query, [email]);
  \`\`\`

### High ğŸŸ 
- Line 78: JWT secret ç¡¬ç¼–ç 
  é£é™©ï¼šæ³„éœ²åæ— æ³•æ’¤é”€
  ä¿®å¤ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡

### Medium ğŸŸ¡
- Line 92: é”™è¯¯æ¶ˆæ¯æš´éœ²å†…éƒ¨ä¿¡æ¯
  å½“å‰ï¼š'Database connection failed: connection timeout'
  å»ºè®®ï¼š'Authentication failed. Please try again.'

## src/auth/middleware.js
..."
```

**review æ¨¡å¼ä¼˜åŠ¿**:
- ğŸ” å½»åº•æ£€æŸ¥ï¼šä¸é—æ¼é—®é¢˜
- ğŸ¯ ä¼˜å…ˆçº§æ˜ç¡®ï¼šä¸¥é‡é—®é¢˜ä¼˜å…ˆ
- ğŸ’¡ å®ç”¨å»ºè®®ï¼šç»™å‡ºä¿®å¤æ–¹æ¡ˆ
- ğŸ“Š ç»“æ„åŒ–è¾“å‡ºï¼šæ˜“äºå¤„ç†

---

### åœºæ™¯ 3: ä»£ç åº“ç ”ç©¶

**ä»»åŠ¡**: ç†è§£æ–°é¡¹ç›®çš„æ¶æ„

**å¯åŠ¨**:
```bash
cd ~/projects/unknown-codebase
claude-research
```

**å¯¹è¯æµç¨‹**:

```
You: è¿™ä¸ªé¡¹ç›®çš„æ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ

Claude (research æ¨¡å¼):
"è®©æˆ‘å…ˆæ¢ç´¢ä»£ç åº“æ¥ç†è§£æ¶æ„ã€‚

æ¾„æ¸…é—®é¢˜ï¼š
1. ä½ æƒ³äº†è§£æ•´ä½“æ¶æ„è¿˜æ˜¯ç‰¹å®šæ¨¡å—ï¼Ÿ
2. é‡ç‚¹æ˜¯æ•°æ®æµã€ç»„ä»¶å…³ç³»ï¼Œè¿˜æ˜¯éƒ¨ç½²æ¶æ„ï¼Ÿ

[ç­‰å¾…å›ç­”]

å‡è®¾ä½ æƒ³äº†è§£æ•´ä½“æ¶æ„ï¼Œæˆ‘ä¼šï¼š

Step 1: æ¢ç´¢é¡¹ç›®ç»“æ„"
[Glob] **/*.{js,ts,json}

"å‘ç°ï¼š
- å‰ç«¯ï¼šReact + TypeScript
- åç«¯ï¼šNode.js + Express
- æ•°æ®åº“ï¼šPostgreSQL

Step 2: åˆ†æå…³é”®æ–‡ä»¶"
[Read] package.json
[Read] src/index.js
[Read] README.md

"å½¢æˆå‡è®¾ï¼š
è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¸‰å±‚æ¶æ„...

Step 3: éªŒè¯å‡è®¾"
[Grep] "import.*from" src/

"å‘ç°å¯¼å…¥å…³ç³»éªŒè¯äº†ä¸‰å±‚ç»“æ„ã€‚

Step 4: æ€»ç»“å‘ç°

## æ¶æ„æ¦‚è§ˆ

\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React   â”‚ â† å‰ç«¯ï¼ˆPort 3000ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Express  â”‚ â† API å±‚ï¼ˆPort 8080ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“ SQL
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Postgres â”‚ â† æ•°æ®å±‚ï¼ˆPort 5432ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

## å…³é”®å‘ç°
1. API ä½¿ç”¨ RESTful è®¾è®¡
2. è®¤è¯é€šè¿‡ JWT
3. æ•°æ®åº“ä½¿ç”¨ Knex.js ORM
...

éœ€è¦æˆ‘æ·±å…¥ç ”ç©¶æŸä¸ªæ¨¡å—å—ï¼Ÿ"
```

**research æ¨¡å¼ä¼˜åŠ¿**:
- ğŸ“š ç³»ç»ŸåŒ–æ¢ç´¢ï¼šæœ‰æ˜ç¡®æµç¨‹
- â“ ä¸»åŠ¨æ¾„æ¸…ï¼šé¿å…è¯¯è§£
- ğŸ“ è®°å½•å‘ç°ï¼šä¾¿äºå›é¡¾
- ğŸ¯ å…ˆç†è§£åè¡ŒåŠ¨ï¼šé¿å…é”™è¯¯

---

## è‡ªå®šä¹‰ä¸Šä¸‹æ–‡

### åˆ›å»ºè‡ªå·±çš„ä¸Šä¸‹æ–‡

**ç¤ºä¾‹ 1: è°ƒè¯•æ¨¡å¼**

**æ–‡ä»¶**: `~/.claude/contexts/debug.md`

```markdown
# Debug Context

Mode: Bug investigation and fixing
Focus: Root cause analysis

## Behavior
- Reproduce the bug first
- Add logging before changing code
- Test the fix thoroughly
- Document the root cause

## Debug Process
1. Understand the symptom
2. Form hypotheses
3. Test each hypothesis
4. Find root cause
5. Fix and verify
6. Add regression test

## Tools to favor
- Read for understanding error flow
- Bash for running tests/reproduction
- Grep for finding related code
- Edit with caution (test each change)

## Output
Root cause explanation first, fix second
```

**ä½¿ç”¨**:
```bash
# æ·»åŠ åˆ«å
alias claude-debug='claude --system-prompt "$(cat ~/.claude/contexts/debug.md)"'

# è°ƒè¯•ä¼šè¯
claude-debug
```

---

**ç¤ºä¾‹ 2: é‡æ„æ¨¡å¼**

**æ–‡ä»¶**: `~/.claude/contexts/refactor.md`

```markdown
# Refactor Context

Mode: Code improvement and restructuring
Focus: Maintainability without breaking functionality

## Behavior
- Run all tests before changes
- Make small, incremental changes
- Run tests after each change
- Keep functionality identical
- Improve readability and structure

## Refactoring Rules
1. RED: Ensure tests pass before starting
2. REFACTOR: Make one small change
3. GREEN: Verify tests still pass
4. COMMIT: Commit after each successful refactor
5. REPEAT: Continue with next improvement

## What to Refactor
- [ ] Extract long methods
- [ ] Remove duplication
- [ ] Improve naming
- [ ] Simplify complex conditionals
- [ ] Reduce coupling

## What NOT to Change
- âŒ Public APIs
- âŒ Functionality/behavior
- âŒ Test expectations

## Tools to favor
- Edit for code changes
- Bash for running tests
- Git for frequent commits
```

**ä½¿ç”¨**:
```bash
alias claude-refactor='claude --system-prompt "$(cat ~/.claude/contexts/refactor.md)"'
```

---

**ç¤ºä¾‹ 3: æ€§èƒ½ä¼˜åŒ–æ¨¡å¼**

**æ–‡ä»¶**: `~/.claude/contexts/performance.md`

```markdown
# Performance Optimization Context

Mode: Performance analysis and improvement
Focus: Speed, memory, efficiency

## Behavior
- Profile before optimizing
- Measure impact of each change
- Document baseline metrics
- Focus on bottlenecks only
- Keep code readable

## Optimization Process
1. Profile to find bottlenecks
2. Set measurable targets
3. Optimize the bottleneck
4. Measure improvement
5. Verify correctness
6. Document the optimization

## Metrics to Track
- Execution time
- Memory usage
- Database queries (N+1 problems)
- Network requests
- CPU usage

## Tools to favor
- Bash for running profilers
- Read for understanding hot paths
- Edit with benchmarks
- Grep for finding similar patterns

## Red Flags
ğŸš© Premature optimization
ğŸš© Optimizing non-bottlenecks
ğŸš© Sacrificing readability
ğŸš© Not measuring results

## Output Format
Baseline â†’ Change â†’ New measurement â†’ Impact
```

**ä½¿ç”¨**:
```bash
alias claude-perf='claude --system-prompt "$(cat ~/.claude/contexts/performance.md)"'
```

---

### é¡¹ç›®ç‰¹å®šä¸Šä¸‹æ–‡

**åœºæ™¯**: ä½ çš„é¡¹ç›®æœ‰ç‰¹å®šçš„ç¼–ç è§„èŒƒ

**æ–‡ä»¶**: `~/projects/myapp/.claude/contexts/myapp-dev.md`

```markdown
# MyApp Development Context

Extends: Development mode
Project: MyApp (E-commerce platform)

## Behavior
- Write code first, explain after
- Run tests after changes
- Keep commits atomic

## Project-Specific Rules

### Code Style
- Use async/await (not callbacks)
- Prefer functional components (React)
- No any types in TypeScript
- Max file size: 400 lines

### Architecture
- Feature-based folder structure
- Each feature has: component, hook, service, test
- API calls only in service files
- State management: Zustand

### Testing
- Unit tests: Vitest
- E2E tests: Playwright
- Minimum coverage: 80%

### Git Workflow
- Branch naming: feature/ABC-123-description
- Commits: Conventional Commits format
- PR must pass: lint, test, build

## Tech Stack Quick Reference
- Frontend: React 18 + TypeScript
- Backend: Node.js + Express + Prisma
- Database: PostgreSQL
- Cache: Redis
- Queue: Bull
```

**ä½¿ç”¨**:
```bash
cd ~/projects/myapp
claude --system-prompt "$(cat .claude/contexts/myapp-dev.md)"

# æˆ–åˆ›å»ºåˆ«å
alias myapp-dev='cd ~/projects/myapp && claude --system-prompt "$(cat .claude/contexts/myapp-dev.md)"'
```

---

## æœ€ä½³å®è·µ

### 1. ä¸Šä¸‹æ–‡æ–‡ä»¶ç»„ç»‡

**æ¨èç›®å½•ç»“æ„**:

```
~/.claude/
â”œâ”€â”€ contexts/
â”‚   â”œâ”€â”€ dev.md              â† é€šç”¨å¼€å‘æ¨¡å¼
â”‚   â”œâ”€â”€ review.md           â† é€šç”¨å®¡æŸ¥æ¨¡å¼
â”‚   â”œâ”€â”€ research.md         â† é€šç”¨ç ”ç©¶æ¨¡å¼
â”‚   â”œâ”€â”€ debug.md            â† è‡ªå®šä¹‰ï¼šè°ƒè¯•æ¨¡å¼
â”‚   â”œâ”€â”€ refactor.md         â† è‡ªå®šä¹‰ï¼šé‡æ„æ¨¡å¼
â”‚   â””â”€â”€ performance.md      â† è‡ªå®šä¹‰ï¼šæ€§èƒ½ä¼˜åŒ–
â”‚
â””â”€â”€ projects/
    â”œâ”€â”€ myapp/
    â”‚   â””â”€â”€ contexts/
    â”‚       â”œâ”€â”€ myapp-dev.md      â† é¡¹ç›®ç‰¹å®šå¼€å‘
    â”‚       â””â”€â”€ myapp-review.md   â† é¡¹ç›®ç‰¹å®šå®¡æŸ¥
    â””â”€â”€ other-project/
        â””â”€â”€ contexts/
            â””â”€â”€ ...
```

### 2. å‘½åçº¦å®š

**æ–‡ä»¶å**:
```
[æ¨¡å¼]-[å˜ä½“].md

ç¤ºä¾‹ï¼š
- dev.md                 â† åŸºç¡€å¼€å‘æ¨¡å¼
- dev-tdd.md            â† å¼€å‘æ¨¡å¼ + TDD
- review.md             â† åŸºç¡€å®¡æŸ¥æ¨¡å¼
- review-security.md    â† å®¡æŸ¥æ¨¡å¼ + å®‰å…¨é‡ç‚¹
```

**åˆ«åå‘½å**:
```bash
# é€šç”¨æ¨¡å¼
claude-{mode}

# é¡¹ç›®ç‰¹å®š
{project}-{mode}

ç¤ºä¾‹ï¼š
alias claude-dev='...'
alias claude-review='...'
alias myapp-dev='...'
alias myapp-review='...'
```

### 3. ä¸Šä¸‹æ–‡å†…å®¹åŸåˆ™

**ä¿æŒç®€æ´**:
```markdown
âœ… æ¯ä¸ªä¸Šä¸‹æ–‡ < 50 è¡Œ
âœ… èšç„¦æ ¸å¿ƒè¡Œä¸º
âœ… ä½¿ç”¨æ¸…å•å’Œä¼˜å…ˆçº§
âŒ é¿å…é•¿ç¯‡è§£é‡Š
âŒ é¿å…ç¤ºä¾‹ä»£ç 
```

**ä½¿ç”¨æ¸…æ™°ç»“æ„**:
```markdown
# [æ¨¡å¼åç§°] Context

Mode: [æ¨¡å¼ç±»å‹]
Focus: [æ ¸å¿ƒå…³æ³¨ç‚¹]

## Behavior
[3-5 æ¡å…³é”®è¡Œä¸º]

## [æ¨¡å¼ç‰¹å®šç« èŠ‚]
[ç»“æ„åŒ–æŒ‡ä»¤]

## Tools to favor
[æ¨èå·¥å…·åˆ—è¡¨]

## Output
[è¾“å‡ºæ ¼å¼è¦æ±‚]
```

**ä¼˜å…ˆçº§æ˜ç¡®**:
```markdown
## Priorities
1. [æœ€é«˜ä¼˜å…ˆçº§]
2. [æ¬¡ä¼˜å…ˆçº§]
3. [ç¬¬ä¸‰ä¼˜å…ˆçº§]

ä¸æ˜¯ï¼š
- åšè¿™ä¸ª
- åšé‚£ä¸ª
- è¿˜è¦åšè¿™ä¸ª
- ...ï¼ˆæ— ä¼˜å…ˆçº§ï¼‰
```

### 4. æµ‹è¯•å’ŒéªŒè¯

**åˆ›å»ºæ–°ä¸Šä¸‹æ–‡å**:

```bash
# 1. æµ‹è¯•åŸºç¡€åŠŸèƒ½
claude --system-prompt "$(cat new-context.md)"
# éªŒè¯ï¼šClaude æ˜¯å¦æŒ‰é¢„æœŸè¡Œä¸ºï¼Ÿ

# 2. å¯¹æ¯”æµ‹è¯•
# Terminal 1: ä½¿ç”¨æ–°ä¸Šä¸‹æ–‡
claude-new-mode
"å®ç°åŠŸèƒ½ X"

# Terminal 2: ä¸ä½¿ç”¨ä¸Šä¸‹æ–‡
claude
"å®ç°åŠŸèƒ½ X"

# æ¯”è¾ƒï¼šè¾“å‡ºå·®å¼‚ã€Token ä½¿ç”¨ã€å®Œæˆè´¨é‡

# 3. è¾¹ç•Œæµ‹è¯•
# å°è¯•è®© Claude è¿åä¸Šä¸‹æ–‡è§„åˆ™
claude-review
"å¿«é€Ÿçœ‹ä¸€çœ¼è¿™ä¸ª PRï¼Œä¸ç”¨å¤ªä»”ç»†"
# éªŒè¯ï¼šClaude æ˜¯å¦ä»ç„¶å½»åº•å®¡æŸ¥ï¼Ÿ

# 4. è¿­ä»£æ”¹è¿›
# æ ¹æ®å®é™…ä½¿ç”¨è°ƒæ•´ä¸Šä¸‹æ–‡å†…å®¹
```

### 5. ç‰ˆæœ¬æ§åˆ¶

**å°†ä¸Šä¸‹æ–‡æ–‡ä»¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶**:

```bash
# é¡¹ç›®ç‰¹å®šä¸Šä¸‹æ–‡
cd ~/projects/myapp
git add .claude/contexts/
git commit -m "feat: add project-specific contexts"

# å…¨å±€ä¸Šä¸‹æ–‡å¤‡ä»½
cd ~/.claude
git init
git add contexts/
git commit -m "init: personal contexts"
git remote add origin git@github.com:user/claude-contexts.git
git push -u origin main
```

**å¥½å¤„**:
- âœ… å›¢é˜Ÿå…±äº«ä¸Šä¸‹æ–‡
- âœ… è¿½è¸ªä¸Šä¸‹æ–‡æ¼”å˜
- âœ… å›æ»šåˆ°ä¹‹å‰ç‰ˆæœ¬
- âœ… è·¨æœºå™¨åŒæ­¥

---

## å¯¹æ¯”åˆ†æ

### vs CLAUDE.md

| ç‰¹æ€§ | CLAUDE.md | åŠ¨æ€ç³»ç»Ÿæç¤ºæ³¨å…¥ |
|------|-----------|-----------------|
| **åŠ è½½æ—¶æœº** | æ¯æ¬¡ä¼šè¯ | æŒ‰éœ€é€‰æ‹© |
| **é€‚ç”¨èŒƒå›´** | é¡¹ç›®çº§é€šç”¨è§„åˆ™ | ä»»åŠ¡ç‰¹å®šè¡Œä¸º |
| **çµæ´»æ€§** | å›ºå®š | é«˜åº¦çµæ´» |
| **Token æ¶ˆè€—** | å§‹ç»ˆæ¶ˆè€— | ä»…éœ€è¦æ—¶æ¶ˆè€— |
| **æƒé™çº§åˆ«** | ç”¨æˆ·æ¶ˆæ¯çº§ | ç³»ç»Ÿæç¤ºçº§ï¼ˆæ›´é«˜ï¼‰ |
| **ä½¿ç”¨åœºæ™¯** | é¡¹ç›®è§„èŒƒã€æ¶æ„çº¦æŸ | ä»»åŠ¡æ¨¡å¼åˆ‡æ¢ |

**ç»„åˆä½¿ç”¨**:
```bash
# CLAUDE.mdï¼šé¡¹ç›®è§„èŒƒï¼ˆå§‹ç»ˆåŠ è½½ï¼‰
# - ä»£ç é£æ ¼
# - æ–‡ä»¶ç»„ç»‡
# - æµ‹è¯•è¦æ±‚

# åŠ¨æ€ä¸Šä¸‹æ–‡ï¼šä»»åŠ¡æ¨¡å¼ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
claude-dev    # å¼€å‘æ¨¡å¼
claude-review # å®¡æŸ¥æ¨¡å¼
```

### vs .claude/rules/

| ç‰¹æ€§ | .claude/rules/ | åŠ¨æ€ç³»ç»Ÿæç¤ºæ³¨å…¥ |
|------|---------------|-----------------|
| **åŠ è½½æ—¶æœº** | æ¯æ¬¡ä¼šè¯ | æŒ‰éœ€é€‰æ‹© |
| **é€‚ç”¨èŒƒå›´** | é¡¹ç›®çº§è§„åˆ™ | ä»»åŠ¡ç‰¹å®šæŒ‡ä»¤ |
| **æ–‡ä»¶æ•°é‡** | å¤šä¸ªè§„åˆ™æ–‡ä»¶ | å•ä¸ªä¸Šä¸‹æ–‡æ–‡ä»¶ |
| **å†…å®¹ç±»å‹** | è§„åˆ™ã€çº¦æŸ | è¡Œä¸ºæ¨¡å¼ |
| **ä¼˜å…ˆçº§** | ç”¨æˆ·æ¶ˆæ¯çº§ | ç³»ç»Ÿæç¤ºçº§ï¼ˆæ›´é«˜ï¼‰ |

**ç»„åˆä½¿ç”¨**:
```bash
# .claude/rules/ï¼šé€šç”¨çº¦æŸï¼ˆå§‹ç»ˆåŠ è½½ï¼‰
# - security.md
# - performance.md
# - api-design.md

# åŠ¨æ€ä¸Šä¸‹æ–‡ï¼šå·¥ä½œæ¨¡å¼ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
claude-dev      # å¿«é€Ÿå¼€å‘
claude-refactor # é‡æ„æ”¹è¿›
```

### vs Skills

| ç‰¹æ€§ | Skills | åŠ¨æ€ç³»ç»Ÿæç¤ºæ³¨å…¥ |
|------|--------|-----------------|
| **è§¦å‘æ–¹å¼** | `/skill-name` å‘½ä»¤ | CLI å¯åŠ¨å‚æ•° |
| **ç”Ÿå‘½å‘¨æœŸ** | å•æ¬¡å¯¹è¯ | æ•´ä¸ªä¼šè¯ |
| **å†…å®¹ç±»å‹** | å…·ä½“ä»»åŠ¡æŒ‡ä»¤ | è¡Œä¸ºæ¨¡å¼è®¾å®š |
| **ä½¿ç”¨åœºæ™¯** | ç‰¹å®šä»»åŠ¡ï¼ˆå¦‚ /tddï¼‰ | å·¥ä½œæ¨¡å¼ï¼ˆå¦‚å¼€å‘/å®¡æŸ¥ï¼‰ |
| **æŒä¹…æ€§** | ä¸´æ—¶ | ä¼šè¯çº§ |

**ç»„åˆä½¿ç”¨**:
```bash
# å¯åŠ¨å¼€å‘æ¨¡å¼ä¼šè¯
claude-dev

# ä¼šè¯ä¸­ä½¿ç”¨ skills
/tdd          # TDD å·¥ä½œæµ
/commit       # æäº¤ä»£ç 
/review-pr    # å®¡æŸ¥ PR
```

---

## é«˜çº§ç”¨æ³•

### 1. å¤šä¸Šä¸‹æ–‡ç»„åˆ

**å±‚æ¬¡åŒ–ä¸Šä¸‹æ–‡**:

```bash
# åŸºç¡€å±‚ï¼šå·¥ä½œæ¨¡å¼
claude --system-prompt "$(cat ~/.claude/contexts/dev.md)" \

# é¡¹ç›®å±‚ï¼šé¡¹ç›®è§„èŒƒ
      --system-prompt "$(cat ./PROJECT-RULES.md)" \

# ä»»åŠ¡å±‚ï¼šç‰¹å®šä»»åŠ¡
      --system-prompt "Implementing auth module. Follow OAuth 2.0 spec."
```

**æ•ˆæœ**:
```
System Prompt = dev.md + PROJECT-RULES.md + inline prompt
    â†“
Claude åŒæ—¶éµå¾ªï¼š
1. å¼€å‘æ¨¡å¼è¡Œä¸ºï¼ˆå…ˆå®ç°åè§£é‡Šï¼‰
2. é¡¹ç›®è§„èŒƒï¼ˆä»£ç é£æ ¼ã€æµ‹è¯•è¦æ±‚ï¼‰
3. å½“å‰ä»»åŠ¡ï¼ˆOAuth 2.0 å®ç°ï¼‰
```

### 2. æ¡ä»¶åŒ–ä¸Šä¸‹æ–‡

**åœºæ™¯**: æ ¹æ® Git åˆ†æ”¯é€‰æ‹©ä¸Šä¸‹æ–‡

**è„šæœ¬**: `~/.claude/scripts/context-selector.sh`

```bash
#!/bin/bash

# è·å–å½“å‰åˆ†æ”¯
BRANCH=$(git rev-parse --abbrev-ref HEAD 2>/dev/null)

# æ ¹æ®åˆ†æ”¯é€‰æ‹©ä¸Šä¸‹æ–‡
if [[ $BRANCH == feature/* ]]; then
    CONTEXT="$HOME/.claude/contexts/dev.md"
elif [[ $BRANCH == hotfix/* ]]; then
    CONTEXT="$HOME/.claude/contexts/debug.md"
elif [[ $BRANCH == refactor/* ]]; then
    CONTEXT="$HOME/.claude/contexts/refactor.md"
else
    CONTEXT="$HOME/.claude/contexts/dev.md"
fi

# å¯åŠ¨ Claude
claude --system-prompt "$(cat $CONTEXT)"
```

**ä½¿ç”¨**:
```bash
# æ·»åŠ åˆ«å
alias claude-auto='~/.claude/scripts/context-selector.sh'

# è‡ªåŠ¨é€‰æ‹©ä¸Šä¸‹æ–‡
git checkout feature/auth
claude-auto  # â†’ è‡ªåŠ¨ä½¿ç”¨ dev.md

git checkout hotfix/login-bug
claude-auto  # â†’ è‡ªåŠ¨ä½¿ç”¨ debug.md
```

### 3. æ—¶é—´æ•æ„Ÿä¸Šä¸‹æ–‡

**åœºæ™¯**: ä¸Šåˆä¸“æ³¨å¼€å‘ï¼Œä¸‹åˆå®¡æŸ¥ä»£ç 

**è„šæœ¬**: `~/.claude/scripts/time-based-context.sh`

```bash
#!/bin/bash

# è·å–å½“å‰å°æ—¶
HOUR=$(date +%H)

# ä¸Šåˆ 9-12: å¼€å‘æ¨¡å¼
if [ $HOUR -ge 9 ] && [ $HOUR -lt 12 ]; then
    CONTEXT="dev.md"
    echo "â˜€ï¸ ä¸Šåˆå¼€å‘æ—¶é—´"

# ä¸‹åˆ 2-5: å®¡æŸ¥æ¨¡å¼
elif [ $HOUR -ge 14 ] && [ $HOUR -lt 17 ]; then
    CONTEXT="review.md"
    echo "ğŸ” ä¸‹åˆå®¡æŸ¥æ—¶é—´"

# å…¶ä»–æ—¶é—´: ç ”ç©¶æ¨¡å¼
else
    CONTEXT="research.md"
    echo "ğŸ“š ç ”ç©¶/å­¦ä¹ æ—¶é—´"
fi

claude --system-prompt "$(cat ~/.claude/contexts/$CONTEXT)"
```

### 4. åŠ¨æ€ç”Ÿæˆä¸Šä¸‹æ–‡

**åœºæ™¯**: åŸºäºé¡¹ç›®ç‰¹å¾åŠ¨æ€ç”Ÿæˆä¸Šä¸‹æ–‡

**è„šæœ¬**: `~/.claude/scripts/generate-context.sh`

```bash
#!/bin/bash

# æ£€æµ‹æŠ€æœ¯æ ˆ
TECH_STACK=""

if [ -f "package.json" ]; then
    TECH_STACK="$TECH_STACK\n- Node.js project"

    if grep -q "react" package.json; then
        TECH_STACK="$TECH_STACK\n- React frontend"
    fi

    if grep -q "express" package.json; then
        TECH_STACK="$TECH_STACK\n- Express backend"
    fi
fi

if [ -f "requirements.txt" ] || [ -f "setup.py" ]; then
    TECH_STACK="$TECH_STACK\n- Python project"
fi

if [ -f "Cargo.toml" ]; then
    TECH_STACK="$TECH_STACK\n- Rust project"
fi

# ç”Ÿæˆä¸Šä¸‹æ–‡
CONTEXT=$(cat <<EOF
# Auto-Generated Development Context

Project: $(basename $(pwd))
Detected stack:
$TECH_STACK

## Behavior
- Follow project conventions
- Run tests after changes
- Use appropriate tools for stack

$(cat ~/.claude/contexts/dev.md)
EOF
)

# å¯åŠ¨ Claude
claude --system-prompt "$CONTEXT"
```

### 5. ä¸Šä¸‹æ–‡å®

**åœºæ™¯**: é¢„å®šä¹‰çš„ä¸Šä¸‹æ–‡ç»„åˆ

**é…ç½®**: `~/.claude/context-macros.sh`

```bash
# å…¨æ ˆå¼€å‘å®
alias claude-fullstack='claude \
  --system-prompt "$(cat ~/.claude/contexts/dev.md)" \
  --system-prompt "Tech Stack: React + Node.js + PostgreSQL" \
  --system-prompt "Run frontend and backend tests after changes"'

# å®‰å…¨å®¡è®¡å®
alias claude-security='claude \
  --system-prompt "$(cat ~/.claude/contexts/review.md)" \
  --system-prompt "Focus: OWASP Top 10 vulnerabilities" \
  --system-prompt "Check: SQL injection, XSS, CSRF, auth bypass"'

# æ€§èƒ½ä¼˜åŒ–å®
alias claude-optimize='claude \
  --system-prompt "$(cat ~/.claude/contexts/performance.md)" \
  --system-prompt "Profile before optimizing. Measure every change." \
  --system-prompt "Target: 50% improvement minimum"'
```

---

## æ€»ç»“

### æ ¸å¿ƒä»·å€¼

**åŠ¨æ€ç³»ç»Ÿæç¤ºæ³¨å…¥è§£å†³çš„æ ¸å¿ƒé—®é¢˜**:

```
ä¼ ç»Ÿæ–¹å¼:
  â”œâ”€ CLAUDE.md (å§‹ç»ˆåŠ è½½)
  â”œâ”€ .claude/rules/ (å§‹ç»ˆåŠ è½½)
  â””â”€ æ‰€æœ‰è§„åˆ™å’ŒæŒ‡ä»¤
      â†“ ç»“æœ
      - Token æµªè´¹
      - è¡Œä¸ºå›ºå®š
      - æ— æ³•æ ¹æ®ä»»åŠ¡è°ƒæ•´

åŠ¨æ€æ³¨å…¥:
  â”œâ”€ è¯†åˆ«ä»»åŠ¡ç±»å‹
  â”œâ”€ é€‰æ‹©å¯¹åº”ä¸Šä¸‹æ–‡
  â””â”€ ä»…åŠ è½½ç›¸å…³æŒ‡ä»¤
      â†“ ç»“æœ
      - Token ä¼˜åŒ–
      - è¡Œä¸ºç²¾å‡†
      - çµæ´»åˆ‡æ¢æ¨¡å¼
```

### å®æ–½æ£€æŸ¥æ¸…å•

**æœ€å°è®¾ç½®** (5 åˆ†é’Ÿ):

- [ ] å¤åˆ¶ä¸‰ä¸ªé¢„å®šä¹‰ä¸Šä¸‹æ–‡åˆ° `~/.claude/contexts/`
- [ ] åœ¨ `~/.bashrc` ä¸­æ·»åŠ ä¸‰ä¸ªåˆ«å
- [ ] æµ‹è¯•ï¼š`claude-dev`, `claude-review`, `claude-research`

**æ¨èè®¾ç½®** (15 åˆ†é’Ÿ):

- [ ] åˆ›å»º 1-2 ä¸ªè‡ªå®šä¹‰ä¸Šä¸‹æ–‡ï¼ˆå¦‚ debug.mdï¼‰
- [ ] ä¸ºå¸¸ç”¨é¡¹ç›®åˆ›å»ºé¡¹ç›®ç‰¹å®šä¸Šä¸‹æ–‡
- [ ] è®¾ç½®åˆ«åå’Œå¿«æ·æ–¹å¼
- [ ] å°†ä¸Šä¸‹æ–‡æ–‡ä»¶åŠ å…¥ç‰ˆæœ¬æ§åˆ¶

**é«˜çº§è®¾ç½®** (30 åˆ†é’Ÿ):

- [ ] åˆ›å»ºä¸Šä¸‹æ–‡é€‰æ‹©è„šæœ¬
- [ ] è®¾ç½®æ¡ä»¶åŒ–ä¸Šä¸‹æ–‡
- [ ] å®šä¹‰ä¸Šä¸‹æ–‡å®
- [ ] å»ºç«‹å›¢é˜Ÿå…±äº«çš„ä¸Šä¸‹æ–‡åº“

### ä½¿ç”¨å»ºè®®

**ä½•æ—¶ä½¿ç”¨**:

âœ… **åº”è¯¥ä½¿ç”¨åŠ¨æ€æ³¨å…¥**:
- æœ‰æ˜ç¡®çš„ä»»åŠ¡æ¨¡å¼ï¼ˆå¼€å‘/å®¡æŸ¥/ç ”ç©¶ï¼‰
- ä¸åŒä»»åŠ¡éœ€è¦ä¸åŒè¡Œä¸º
- æƒ³è¦ä¼˜åŒ– Token ä½¿ç”¨
- å›¢é˜Ÿéœ€è¦æ ‡å‡†åŒ–å·¥ä½œæµç¨‹

âŒ **ä¸éœ€è¦åŠ¨æ€æ³¨å…¥**:
- ä»»åŠ¡ç±»å‹å•ä¸€
- é¡¹ç›®è§„æ¨¡å¾ˆå°
- å§‹ç»ˆä½¿ç”¨ç›¸åŒçš„å·¥ä½œæ–¹å¼
- Token ä½¿ç”¨ä¸æ˜¯å…³æ³¨ç‚¹

**ç»„åˆç­–ç•¥**:

```
CLAUDE.md (é¡¹ç›®è§„èŒƒ)
    +
.claude/rules/ (é€šç”¨çº¦æŸ)
    +
åŠ¨æ€ä¸Šä¸‹æ–‡ (ä»»åŠ¡æ¨¡å¼) â† ä½ åœ¨è¿™é‡Œé€‰æ‹©
    +
Skills (ç‰¹å®šä»»åŠ¡) â† /tdd, /commit ç­‰
    =
å®Œæ•´çš„å·¥ä½œæµç¨‹
```

### æœ€ä½³å®è·µæ€»ç»“

1. **âœ… ä¿æŒä¸Šä¸‹æ–‡ç®€æ´** - æ¯ä¸ªæ–‡ä»¶ < 50 è¡Œ
2. **âœ… ä½¿ç”¨ Shell åˆ«å** - ç®€åŒ–å¯åŠ¨å‘½ä»¤
3. **âœ… ç‰ˆæœ¬æ§åˆ¶ä¸Šä¸‹æ–‡** - è¿½è¸ªæ¼”å˜ï¼Œå›¢é˜Ÿå…±äº«
4. **âœ… å®šæœŸå®¡æŸ¥æ›´æ–°** - æ ¹æ®å®é™…ä½¿ç”¨è°ƒæ•´
5. **âœ… ç»„åˆä¸åŒå±‚çº§** - å…¨å±€ + é¡¹ç›® + ä»»åŠ¡
6. **âŒ é¿å…ä¸Šä¸‹æ–‡å†²çª** - æ¸…æ™°çš„ä¼˜å…ˆçº§
7. **âŒ ä¸è¦è¿‡åº¦å®šåˆ¶** - ä»é¢„å®šä¹‰æ¨¡æ¿å¼€å§‹
8. **âŒ ä¸è¦å…¨éƒ¨å¡è¿›ä¸€ä¸ªæ–‡ä»¶** - æ¨¡å—åŒ–è®¾è®¡

---

## å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£

**the-longform-guide.md**:
- ç¬¬ 54-75 è¡Œï¼šåŠ¨æ€ç³»ç»Ÿæç¤ºæ³¨å…¥è¯¦è§£
- æ¦‚å¿µæ¥æºå’Œè®¾è®¡ç†å¿µ

**README.md**:
- ç¬¬ 320-323 è¡Œï¼šcontexts/ ç›®å½•è¯´æ˜
- æ–‡ä»¶ç»“æ„å’Œç»„ç»‡æ–¹å¼

### ç›¸å…³æŠ€æœ¯

**é…åˆä½¿ç”¨**:
- CLAUDE.md - é¡¹ç›®çº§è§„èŒƒ
- .claude/rules/ - é€šç”¨è§„åˆ™
- Skills - ç‰¹å®šä»»åŠ¡ (`/tdd`, `/commit`)
- Hooks - è‡ªåŠ¨åŒ–æ£€æŸ¥

### ç¤¾åŒºèµ„æº

**GitHub Repository**:
- https://github.com/affaan-m/everything-claude-code

**ç¤ºä¾‹ä¸Šä¸‹æ–‡åº“**:
- https://github.com/affaan-m/everything-claude-code/tree/main/contexts

**ç›¸å…³è®¨è®º**:
- Token Optimization Guide
- Context Management Best Practices

---

## é™„å½•

### A. å®Œæ•´åˆ«åé…ç½®ç¤ºä¾‹

**æ–‡ä»¶**: `~/.claude-aliases.sh`

```bash
#!/bin/bash
# Claude Code Context Aliases

# ============================================
# åŸºç¡€ä¸Šä¸‹æ–‡åˆ«å
# ============================================

# å¼€å‘æ¨¡å¼
alias claude-dev='claude --system-prompt "$(cat ~/.claude/contexts/dev.md)"'

# ä»£ç å®¡æŸ¥æ¨¡å¼
alias claude-review='claude --system-prompt "$(cat ~/.claude/contexts/review.md)"'

# ç ”ç©¶æ¢ç´¢æ¨¡å¼
alias claude-research='claude --system-prompt "$(cat ~/.claude/contexts/research.md)"'

# ============================================
# è‡ªå®šä¹‰ä¸Šä¸‹æ–‡åˆ«å
# ============================================

# è°ƒè¯•æ¨¡å¼
alias claude-debug='claude --system-prompt "$(cat ~/.claude/contexts/debug.md)"'

# é‡æ„æ¨¡å¼
alias claude-refactor='claude --system-prompt "$(cat ~/.claude/contexts/refactor.md)"'

# æ€§èƒ½ä¼˜åŒ–æ¨¡å¼
alias claude-perf='claude --system-prompt "$(cat ~/.claude/contexts/performance.md)"'

# ============================================
# é¡¹ç›®ç‰¹å®šåˆ«å
# ============================================

# MyApp é¡¹ç›®
alias myapp-dev='cd ~/projects/myapp && claude --system-prompt "$(cat .claude/contexts/myapp-dev.md)"'
alias myapp-review='cd ~/projects/myapp && claude --system-prompt "$(cat .claude/contexts/myapp-review.md)"'

# ============================================
# ç»„åˆåˆ«åï¼ˆå¤šä¸Šä¸‹æ–‡ï¼‰
# ============================================

# å…¨æ ˆå¼€å‘
alias claude-fullstack='claude \
  --system-prompt "$(cat ~/.claude/contexts/dev.md)" \
  --system-prompt "Tech Stack: React + Node.js + PostgreSQL"'

# å®‰å…¨å®¡è®¡
alias claude-security='claude \
  --system-prompt "$(cat ~/.claude/contexts/review.md)" \
  --system-prompt "Focus: Security vulnerabilities (OWASP Top 10)"'

# ============================================
# å·¥å…·å‡½æ•°
# ============================================

# åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ä¸Šä¸‹æ–‡
function claude-contexts() {
    echo "Available contexts:"
    ls -1 ~/.claude/contexts/*.md | xargs -n1 basename
}

# é¢„è§ˆä¸Šä¸‹æ–‡å†…å®¹
function claude-context-show() {
    if [ -z "$1" ]; then
        echo "Usage: claude-context-show <context-name>"
        return 1
    fi

    cat ~/.claude/contexts/"$1".md
}

# æ™ºèƒ½ä¸Šä¸‹æ–‡é€‰æ‹©ï¼ˆæ ¹æ®ç›®å½•ï¼‰
function claude-auto() {
    local context="dev.md"

    # æ£€æµ‹é¡¹ç›®ç±»å‹
    if [ -f "package.json" ]; then
        context="dev.md"
    elif [ -d ".git" ]; then
        # æ£€æŸ¥ Git åˆ†æ”¯
        local branch=$(git rev-parse --abbrev-ref HEAD 2>/dev/null)

        if [[ $branch == hotfix/* ]]; then
            context="debug.md"
        elif [[ $branch == refactor/* ]]; then
            context="refactor.md"
        fi
    fi

    echo "ğŸ¯ Using context: $context"
    claude --system-prompt "$(cat ~/.claude/contexts/$context)"
}

# ============================================
# åŠ è½½åˆ«å
# ============================================

# åœ¨ ~/.bashrc æˆ– ~/.zshrc ä¸­æ·»åŠ ï¼š
# source ~/.claude-aliases.sh
```

### B. å¿«é€Ÿå‚è€ƒå¡

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Dynamic System Prompt Injection - Quick Reference    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  åŸºç¡€å‘½ä»¤                                               â•‘
â•‘  claude --system-prompt "$(cat context.md)"           â•‘
â•‘                                                        â•‘
â•‘  é¢„å®šä¹‰æ¨¡å¼                                             â•‘
â•‘  claude-dev       â†’ å¼€å‘æ¨¡å¼ï¼ˆå¿«é€Ÿå®ç°ï¼‰                â•‘
â•‘  claude-review    â†’ å®¡æŸ¥æ¨¡å¼ï¼ˆå½»åº•æ£€æŸ¥ï¼‰                â•‘
â•‘  claude-research  â†’ ç ”ç©¶æ¨¡å¼ï¼ˆå…ˆç†è§£åè¡ŒåŠ¨ï¼‰             â•‘
â•‘                                                        â•‘
â•‘  æƒé™å±‚çº§                                               â•‘
â•‘  System Prompt > User Messages > Tool Results         â•‘
â•‘                                                        â•‘
â•‘  ä½•æ—¶ä½¿ç”¨                                               â•‘
â•‘  âœ… æœ‰æ˜ç¡®çš„ä»»åŠ¡æ¨¡å¼åˆ‡æ¢éœ€æ±‚                            â•‘
â•‘  âœ… æƒ³è¦ä¼˜åŒ– Token ä½¿ç”¨                                â•‘
â•‘  âœ… éœ€è¦æ ‡å‡†åŒ–å·¥ä½œæµç¨‹                                  â•‘
â•‘                                                        â•‘
â•‘  æ–‡ä»¶ä½ç½®                                               â•‘
â•‘  ~/.claude/contexts/                                  â•‘
â•‘    â”œâ”€â”€ dev.md                                        â•‘
â•‘    â”œâ”€â”€ review.md                                     â•‘
â•‘    â””â”€â”€ research.md                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2026-02-21 18:19:49
**åˆ†æä½œè€…**: Claude Sonnet 4.5 (AI Assistant)
**åŸºäºç‰ˆæœ¬**: everything-claude-code (latest commit)
