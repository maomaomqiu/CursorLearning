# æŒç»­å­¦ä¹ ç³»ç»Ÿå®Œæ•´å®ç°

> Everything Claude Code - Continuous Learning System æ·±åº¦è§£æ

**ç”Ÿæˆæ—¶é—´**: 2026-02-21 19:24:10
**åŸæ–‡æ¥æº**: `github.com/affaan-m/everything-claude-code/skills/continuous-learning`
**åˆ†æèŒƒå›´**: v1 å’Œ v2 æ¶æ„ã€å®ç°ä»£ç ã€é…ç½®æ–¹æ³•ã€æœ€ä½³å®è·µ

---

## â“ å¿«é€Ÿé—®ç­”

**Q: æŒç»­å­¦ä¹ ç³»ç»Ÿæ˜¯ä»€ä¹ˆï¼Ÿ**

**A: è‡ªåŠ¨å°†é‡å¤å‡ºç°çš„è§£å†³æ–¹æ¡ˆè½¬åŒ–ä¸ºå¯å¤ç”¨çŸ¥è¯†**

```
ä¼ ç»Ÿæ–¹å¼:
  é—®é¢˜ 1 â†’ æ‰‹åŠ¨è§£å†³ (30 åˆ†é’Ÿ)
  é—®é¢˜ 2 (ç›¸åŒ) â†’ å†æ¬¡æ‰‹åŠ¨ (20 åˆ†é’Ÿ)
  é—®é¢˜ 3 (ç›¸åŒ) â†’ åˆæ‰‹åŠ¨ (15 åˆ†é’Ÿ)
  âŒ æµªè´¹: 65 åˆ†é’Ÿ

æŒç»­å­¦ä¹ :
  é—®é¢˜ 1-2 â†’ æ‰‹åŠ¨è§£å†³
  ç³»ç»Ÿè‡ªåŠ¨å­¦ä¹  â†’ ä¿å­˜ä¸º skill
  é—®é¢˜ 3+ â†’ è‡ªåŠ¨åº”ç”¨ (2 åˆ†é’Ÿ) âœ…
  ğŸ’° èŠ‚çœ: æ¯æ¬¡ 13 åˆ†é’Ÿ
```

**æ ¸å¿ƒæœºåˆ¶**:
- ğŸ” **è§‚å¯Ÿ**: ä¼šè¯ç»“æŸæ—¶åˆ†æè½¬å½•
- ğŸ§  **è¯†åˆ«**: å‘ç°å¯å¤ç”¨çš„æ¨¡å¼
- ğŸ’¾ **ä¿å­˜**: å­˜ä¸º learned skill
- ğŸš€ **åº”ç”¨**: ä¸‹æ¬¡è‡ªåŠ¨åŠ è½½

---

## ç›®å½•

- [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
- [ä¸¤ä¸ªç‰ˆæœ¬å¯¹æ¯”](#ä¸¤ä¸ªç‰ˆæœ¬å¯¹æ¯”)
- [v1 è¯¦è§£](#v1-è¯¦è§£)
- [v2 è¯¦è§£](#v2-è¯¦è§£)
- [æœ€å°å®‰è£…æ–¹æ¡ˆ](#æœ€å°å®‰è£…æ–¹æ¡ˆ)
- [é…ç½®è¯¦è§£](#é…ç½®è¯¦è§£)
- [å®é™…ä½¿ç”¨](#å®é™…ä½¿ç”¨)
- [æ¨¡å¼ç±»å‹](#æ¨¡å¼ç±»å‹)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## æ ¸å¿ƒæ¦‚å¿µ

### ä»€ä¹ˆæ˜¯æŒç»­å­¦ä¹ ï¼Ÿ

**å®šä¹‰**: ä¸€ä¸ªè‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œé€šè¿‡è§‚å¯Ÿä½ çš„å·¥ä½œä¼šè¯ï¼Œè¯†åˆ«å¯å¤ç”¨çš„æ¨¡å¼ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸ºå¯åŠ è½½çš„ skillsã€‚

**æ ¸å¿ƒä»·å€¼**:

```
é—®é¢˜: é‡å¤æµªè´¹æ—¶é—´
  â”œâ”€ é‡åˆ°ç›¸åŒé—®é¢˜å¤šæ¬¡
  â”œâ”€ æ¯æ¬¡éƒ½è¦é‡æ–°è§£å†³
  â”œâ”€ Claude ä¸è®°å¾—ä¸Šæ¬¡çš„è§£å†³æ–¹æ¡ˆ
  â””â”€ æµªè´¹å¤§é‡æ—¶é—´å’Œ token

è§£å†³æ–¹æ¡ˆ: æŒç»­å­¦ä¹ 
  â”œâ”€ è‡ªåŠ¨è¯†åˆ«é‡å¤æ¨¡å¼
  â”œâ”€ ä¿å­˜ä¸ºå¯å¤ç”¨ skill
  â”œâ”€ ä¸‹æ¬¡è‡ªåŠ¨åº”ç”¨
  â””â”€ ç§¯ç´¯å¼å·¥ä½œï¼Œä¸æ˜¯é‡å¤å¼å·¥ä½œ
```

### å·¥ä½œåŸç†

```mermaid
graph TB
    A[å·¥ä½œä¼šè¯] --> B[é‡åˆ°é—®é¢˜]
    B --> C[è§£å†³é—®é¢˜]
    C --> D[ç”¨æˆ·çº æ­£æ–¹æ³•]
    D --> E[ä¼šè¯ç»§ç»­...]
    E --> F{ä¼šè¯ç»“æŸ}
    F --> G[Stop Hook è§¦å‘]
    G --> H{æ¶ˆæ¯æ•° >= 10?}
    H -->|å¦| I[è·³è¿‡]
    H -->|æ˜¯| J[åˆ†ææ¨¡å¼]
    J --> K{å‘ç°å¯å¤ç”¨æ¨¡å¼?}
    K -->|å¦| I
    K -->|æ˜¯| L[è¯¢é—®ç”¨æˆ·]
    L --> M{æ‰¹å‡†?}
    M -->|å¦| I
    M -->|æ˜¯| N[ä¿å­˜ Learned Skill]
    N --> O[~/.claude/skills/learned/]
    O --> P[ä¸‹æ¬¡è‡ªåŠ¨åŠ è½½]
    P --> Q[SessionStart Hook]
    Q --> A
```

### å…³é”®ç»„ä»¶

| ç»„ä»¶ | åŠŸèƒ½ | è§¦å‘æ—¶æœº |
|------|------|---------|
| **Stop Hook** | è§¦å‘è¯„ä¼° | ä¼šè¯ç»“æŸ |
| **evaluate-session** | åˆ†æè½¬å½• | Hook è°ƒç”¨ |
| **Pattern Detection** | è¯†åˆ«æ¨¡å¼ | åˆ†æè¿‡ç¨‹ |
| **Learned Skills** | å­˜å‚¨çŸ¥è¯† | ä¿å­˜å |
| **SessionStart Hook** | åŠ è½½çŸ¥è¯† | æ–°ä¼šè¯ |

---

## ä¸¤ä¸ªç‰ˆæœ¬å¯¹æ¯”

### æ¦‚è§ˆè¡¨

| ç‰¹æ€§ | v1 (Simple) | v2 (Instinct-Based) |
|------|------------|---------------------|
| **è§‚å¯Ÿæ–¹å¼** | Stop hookï¼ˆä¼šè¯ç»“æŸï¼‰ | PreToolUse/PostToolUseï¼ˆå®æ—¶ï¼‰ |
| **åˆ†ææ–¹å¼** | ä¸»ä¼šè¯ä¸Šä¸‹æ–‡ | åå° Haiku ä»£ç† |
| **å­¦ä¹ å•å…ƒ** | å®Œæ•´ skills | åŸå­ "instincts" |
| **ç²’åº¦** | ç²—ï¼ˆä¸€ä¸ª skillï¼‰ | ç»†ï¼ˆå¤šä¸ª instinctsï¼‰ |
| **ç½®ä¿¡åº¦** | æ—  | 0.3-0.9 åŠ æƒ |
| **æ¼”åŒ–è·¯å¾„** | ç›´æ¥ â†’ skill | instincts â†’ cluster â†’ skill |
| **å…±äº«æœºåˆ¶** | æ‰‹åŠ¨å¤åˆ¶ | å¯¼å‡º/å¯¼å…¥ instincts |
| **å¤æ‚åº¦** | â­ ç®€å• | â­â­â­â­ å¤æ‚ |
| **å¯é æ€§** | ~80%ï¼ˆåŸºäº skill è§¦å‘ï¼‰ | ~100%ï¼ˆåŸºäº hookï¼‰ |
| **token æˆæœ¬** | ä½ | ä¸­ï¼ˆåå°ä»£ç†ï¼‰ |
| **é€‚ç”¨åœºæ™¯** | âœ… æ—¥å¸¸ä½¿ç”¨ | ğŸ”¬ é«˜çº§ç ”ç©¶ |
| **æ¨è** | âœ… åˆå­¦è€… | é«˜çº§ç”¨æˆ· |

### æ¶æ„å¯¹æ¯”

**v1 æ¶æ„**:
```
ä¼šè¯ â†’ Stop Hook â†’ åˆ†æï¼ˆä¸»ä¼šè¯ï¼‰â†’ Skill â†’ ~/.claude/skills/learned/
```

**v2 æ¶æ„**:
```
ä¼šè¯ â†’ PreToolUse/PostToolUse Hooks â†’ observations.jsonl
                                             â†“
                    åå° Haiku ä»£ç† â†’ åˆ†æ observations
                                             â†“
                                      Instincts (atomic)
                                             â†“
                                      Clustering
                                             â†“
                    Skills/Commands/Agents (evolved)
```

### é€‰æ‹©å»ºè®®

**é€‰æ‹© v1 å¦‚æœ**:
- âœ… åˆšå¼€å§‹ä½¿ç”¨ Claude Code
- âœ… æƒ³è¦ç®€å•ã€å¯é çš„è§£å†³æ–¹æ¡ˆ
- âœ… ä¸æƒ³èŠ±æ—¶é—´é…ç½®å¤æ‚ç³»ç»Ÿ
- âœ… æ—¥å¸¸å·¥ä½œè¶³å¤Ÿ

**é€‰æ‹© v2 å¦‚æœ**:
- ğŸ”¬ æƒ³è¦æœ€å…ˆè¿›çš„å­¦ä¹ ç³»ç»Ÿ
- ğŸ”¬ æ„¿æ„æŠ•å…¥æ—¶é—´é…ç½®å’Œè°ƒä¼˜
- ğŸ”¬ éœ€è¦ç²¾ç»†æ§åˆ¶å­¦ä¹ è¿‡ç¨‹
- ğŸ”¬ æƒ³è¦å¯¼å‡º/å¯¼å…¥çŸ¥è¯†åº“

**æ¨èè·¯å¾„**: **å…ˆç”¨ v1ï¼Œç†Ÿæ‚‰åå†è€ƒè™‘ v2**

---

## v1 è¯¦è§£

### æ–‡ä»¶ç»“æ„

```
skills/continuous-learning/
â”œâ”€â”€ SKILL.md              â† æ–‡æ¡£ï¼ˆ119 è¡Œï¼‰
â”œâ”€â”€ config.json           â† é…ç½®ï¼ˆ18 è¡Œï¼‰
â””â”€â”€ evaluate-session.sh   â† æ ¸å¿ƒè„šæœ¬ï¼ˆ70 è¡Œï¼‰
```

### evaluate-session.sh å®Œæ•´è§£æ

```bash
#!/bin/bash
# Continuous Learning - Session Evaluator
# Runs on Stop hook to extract reusable patterns

set -e

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 1. åˆå§‹åŒ–é…ç½®
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
CONFIG_FILE="$SCRIPT_DIR/config.json"
LEARNED_SKILLS_PATH="${HOME}/.claude/skills/learned"
MIN_SESSION_LENGTH=10

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 2. åŠ è½½é…ç½®æ–‡ä»¶
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

if [ -f "$CONFIG_FILE" ]; then
  # æ£€æŸ¥ jq æ˜¯å¦å®‰è£…
  if ! command -v jq &>/dev/null; then
    echo "[ContinuousLearning] jq is required but not installed, using defaults" >&2
  else
    # ä» config.json è¯»å–é…ç½®
    MIN_SESSION_LENGTH=$(jq -r '.min_session_length // 10' "$CONFIG_FILE")

    # å¤„ç† ~ åœ¨è·¯å¾„ä¸­
    LEARNED_SKILLS_PATH=$(jq -r '.learned_skills_path // "~/.claude/skills/learned/"' "$CONFIG_FILE" | sed "s|~|$HOME|")
  fi
fi

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 3. ç¡®ä¿ç›®å½•å­˜åœ¨
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

mkdir -p "$LEARNED_SKILLS_PATH"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 4. è·å–è½¬å½•æ–‡ä»¶è·¯å¾„
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ä» stdin è¯»å– JSONï¼ˆClaude Code hook è¾“å…¥ï¼‰
stdin_data=$(cat)

# æå– transcript_path
transcript_path=$(echo "$stdin_data" | grep -o '"transcript_path":"[^"]*"' | head -1 | cut -d'"' -f4)

# å›é€€åˆ°ç¯å¢ƒå˜é‡ï¼ˆå‘åå…¼å®¹ï¼‰
if [ -z "$transcript_path" ]; then
  transcript_path="${CLAUDE_TRANSCRIPT_PATH:-}"
fi

# å¦‚æœä»ç„¶æ²¡æœ‰è·¯å¾„ï¼Œé€€å‡º
if [ -z "$transcript_path" ] || [ ! -f "$transcript_path" ]; then
  exit 0
fi

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 5. è®¡ç®—ä¼šè¯é•¿åº¦
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ç»Ÿè®¡ç”¨æˆ·æ¶ˆæ¯æ•°é‡
message_count=$(grep -c '"type":"user"' "$transcript_path" 2>/dev/null || echo "0")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 6. æ£€æŸ¥é˜ˆå€¼
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

if [ "$message_count" -lt "$MIN_SESSION_LENGTH" ]; then
  echo "[ContinuousLearning] Session too short ($message_count messages), skipping" >&2
  exit 0
fi

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 7. æç¤º Claude è¯„ä¼°æ¨¡å¼
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# è¾“å‡ºåˆ° stderrï¼ˆç”¨æˆ·å¯è§ï¼‰
echo "[ContinuousLearning] Session has $message_count messages - evaluate for extractable patterns" >&2
echo "[ContinuousLearning] Save learned skills to: $LEARNED_SKILLS_PATH" >&2

# å®é™…çš„æ¨¡å¼æå–ç”± Claude åœ¨ä¸»ä¼šè¯ä¸­å®Œæˆ
# è¿™ä¸ªè„šæœ¬åªæ˜¯è§¦å‘è¯„ä¼°çš„ä¿¡å·
```

### å…³é”®è®¾è®¡å†³ç­–

#### 1. ä¸ºä»€ä¹ˆç”¨ Stop Hook è€Œä¸æ˜¯ UserPromptSubmitï¼Ÿ

| Hook ç±»å‹ | è§¦å‘é¢‘ç‡ | æ€§èƒ½å½±å“ | ä¸Šä¸‹æ–‡ |
|-----------|---------|---------|--------|
| **UserPromptSubmit** | æ¯æ¡æ¶ˆæ¯ | âŒ å¢åŠ å»¶è¿Ÿ | éƒ¨åˆ†ä¼šè¯ |
| **Stop Hook** | ä¼šè¯ç»“æŸ | âœ… æ— å»¶è¿Ÿ | å®Œæ•´ä¼šè¯ |

**Stop Hook çš„ä¼˜åŠ¿**:
- âœ… è½»é‡çº§ï¼šåªè¿è¡Œä¸€æ¬¡
- âœ… æ— é˜»å¡ï¼šä¸å½±å“äº¤äº’ä½“éªŒ
- âœ… å®Œæ•´ä¸Šä¸‹æ–‡ï¼šå¯ä»¥çœ‹åˆ°æ•´ä¸ªä¼šè¯

#### 2. ä¸ºä»€ä¹ˆåªæ˜¯"æç¤º"è€Œä¸æ˜¯ç›´æ¥æå–ï¼Ÿ

```bash
# è„šæœ¬è¾“å‡º
echo "[ContinuousLearning] evaluate for extractable patterns" >&2

# å®é™…æå–ç”± Claude å®Œæˆ
# å› ä¸º Claude æ‰èƒ½çœŸæ­£ç†è§£æ¨¡å¼çš„è¯­ä¹‰
```

**åŸå› **:
- ğŸ§  **è¯­ä¹‰ç†è§£**: æ¨¡å¼è¯†åˆ«éœ€è¦ AI çš„ç†è§£èƒ½åŠ›
- ğŸ¯ **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**: Claude çŸ¥é“å¯¹è¯çš„å®Œæ•´ä¸Šä¸‹æ–‡
- ğŸ’¡ **æ™ºèƒ½åˆ¤æ–­**: åˆ¤æ–­æ¨¡å¼æ˜¯å¦å€¼å¾—ä¿å­˜éœ€è¦æ¨ç†

#### 3. ä¸ºä»€ä¹ˆéœ€è¦ >= 10 æ¡æ¶ˆæ¯ï¼Ÿ

```bash
MIN_SESSION_LENGTH=10  # é»˜è®¤é˜ˆå€¼
```

**åŸå› **:
- âŒ **å¤ªçŸ­ï¼ˆ< 5ï¼‰**: å¯èƒ½æ˜¯ç®€å•æŸ¥è¯¢ï¼Œæ— å¯å­¦ä¹ æ¨¡å¼
- âœ… **ä¸­ç­‰ï¼ˆ10-20ï¼‰**: é€šå¸¸åŒ…å«å®Œæ•´çš„é—®é¢˜-è§£å†³è¿‡ç¨‹
- âš ï¸ **å¤ªé•¿ï¼ˆ> 50ï¼‰**: å¯èƒ½åŒ…å«å¤šä¸ªä¸ç›¸å…³ä¸»é¢˜

**å¯è°ƒæ•´**:
```json
{
  "min_session_length": 15  // æé«˜åˆ° 15 å‡å°‘å™ªéŸ³
}
```

### config.json è¯¦è§£

```json
{
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ä¼šè¯é•¿åº¦é˜ˆå€¼
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "min_session_length": 10,
  // è‡³å°‘ 10 æ¡ç”¨æˆ·æ¶ˆæ¯æ‰è¯„ä¼°
  // å¤ªçŸ­çš„ä¼šè¯é€šå¸¸æ²¡æœ‰å¯å­¦ä¹ çš„æ¨¡å¼

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // æå–é˜ˆå€¼
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "extraction_threshold": "medium",
  // low: æ›´å®¹æ˜“æå–ï¼ˆå¯èƒ½æœ‰å™ªéŸ³ï¼‰
  // medium: å¹³è¡¡ï¼ˆæ¨èï¼‰
  // high: åªæå–æ˜æ˜¾æ¨¡å¼ï¼ˆå¯èƒ½é—æ¼ï¼‰

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // è‡ªåŠ¨æ‰¹å‡†
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "auto_approve": false,
  // false: æ¯æ¬¡è¯¢é—®æ˜¯å¦ä¿å­˜ï¼ˆæ¨èåˆå­¦è€…ï¼‰
  // true: è‡ªåŠ¨ä¿å­˜ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // å­˜å‚¨è·¯å¾„
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "learned_skills_path": "~/.claude/skills/learned/",

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // æ£€æµ‹çš„æ¨¡å¼ç±»å‹
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "patterns_to_detect": [
    "error_resolution",      // é”™è¯¯è§£å†³æ–¹æ¡ˆ
    "user_corrections",      // ç”¨æˆ·çº æ­£
    "workarounds",          // å˜é€šæ–¹æ¡ˆ
    "debugging_techniques",  // è°ƒè¯•æŠ€æœ¯
    "project_specific"      // é¡¹ç›®ç‰¹å®š
  ],

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // å¿½ç•¥çš„æ¨¡å¼ç±»å‹
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "ignore_patterns": [
    "simple_typos",         // ç®€å•æ‹¼å†™é”™è¯¯
    "one_time_fixes",       // ä¸€æ¬¡æ€§ä¿®å¤
    "external_api_issues"   // å¤–éƒ¨ API é—®é¢˜
  ]
}
```

### Learned Skill æ ¼å¼

**æ–‡ä»¶**: `~/.claude/skills/learned/jwt-expiry-format.md`

```markdown
---
name: jwt-expiry-format
description: JWT token expiresIn parameter must use string format
pattern: error_resolution
confidence: high
created: 2026-02-18
updated: 2026-02-21
observations: 3
---

# JWT Token Expiry Format Issue

## Problem
JWT tokens expire immediately when using millisecond numbers for `expiresIn`.

## Root Cause
jsonwebtoken v9.x changed the `expiresIn` parameter to require string format instead of numeric milliseconds.

## Solution

âŒ **Wrong (causes immediate expiry)**:
```javascript
const token = jwt.sign(payload, secret, {
  expiresIn: Date.now() + 900000  // Milliseconds
});
```

âœ… **Correct**:
```javascript
const token = jwt.sign(payload, secret, {
  expiresIn: '15m'  // String format
});
```

## Valid String Formats
- `'60s'` - 60 seconds
- `'15m'` - 15 minutes
- `'2h'` - 2 hours
- `'7d'` - 7 days

## Evidence
- Observed in 3 sessions
- Dates: 2026-02-15, 2026-02-18, 2026-02-21
- User corrected this approach twice
- Tests confirmed string format works

## Related
- jsonwebtoken v9.x migration guide
- src/services/token.service.js (line 45)

## When to Apply
- Implementing JWT authentication
- Upgrading from jsonwebtoken v8 to v9
- Debugging token expiry issues
```

---

## v2 è¯¦è§£

### æ–‡ä»¶ç»“æ„

```
skills/continuous-learning-v2/
â”œâ”€â”€ SKILL.md              â† æ–‡æ¡£ï¼ˆ200+ è¡Œï¼‰
â”œâ”€â”€ config.json           â† é…ç½®ï¼ˆ42 è¡Œï¼‰
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ pre-tool-use.js   â† è§‚å¯Ÿå·¥å…·è°ƒç”¨å‰
â”‚   â””â”€â”€ post-tool-use.js  â† è§‚å¯Ÿå·¥å…·è°ƒç”¨å
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ observer.js       â† åå°åˆ†æä»£ç†
â”‚   â”œâ”€â”€ instinct-manager.js
â”‚   â””â”€â”€ evolution.js
â””â”€â”€ agents/
    â””â”€â”€ observer-agent.md â† è§‚å¯Ÿè€…ä»£ç†é…ç½®
```

### Instinct æ¨¡å‹

**æ ¸å¿ƒç†å¿µ**: ç”¨å°çš„ã€åŸå­åŒ–çš„"æœ¬èƒ½"æ›¿ä»£å¤§çš„ skills

**Instinct ç¤ºä¾‹**:

```yaml
---
id: prefer-functional-style
trigger: "when writing new functions"
confidence: 0.7
domain: "code-style"
source: "session-observation"
created: 2026-02-15
last_triggered: 2026-02-21
trigger_count: 5
success_rate: 0.8
evidence:
  - session: 2026-02-15-abc123
    observation: "User corrected class to functional"
  - session: 2026-02-18-def456
    observation: "Repeated functional preference"
---

# Prefer Functional Style

## Action
Use functional patterns over classes when appropriate.

## Context
- Pure functions for data transformation
- Avoid stateful classes unless necessary
- Prefer composition over inheritance

## Example

âŒ **Class-based**:
```javascript
class Calculator {
  add(a, b) {
    return a + b;
  }
}
```

âœ… **Functional**:
```javascript
const add = (a, b) => a + b;
```

## Confidence Rationale
- 0.7 confidence based on 5 observations
- User explicitly corrected 2 times
- Pattern consistent across sessions
```

### Instinct å±æ€§

| å±æ€§ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| **id** | string | å”¯ä¸€æ ‡è¯†ç¬¦ |
| **trigger** | string | è§¦å‘æ¡ä»¶ |
| **confidence** | 0.3-0.9 | ç½®ä¿¡åº¦ |
| **domain** | string | é¢†åŸŸæ ‡ç­¾ |
| **source** | string | æ¥æºï¼ˆobservation/manualï¼‰ |
| **created** | date | åˆ›å»ºæ—¶é—´ |
| **last_triggered** | date | æœ€åè§¦å‘æ—¶é—´ |
| **trigger_count** | number | è§¦å‘æ¬¡æ•° |
| **success_rate** | 0-1 | æˆåŠŸç‡ |
| **evidence** | array | è¯æ®åˆ—è¡¨ |

### ç½®ä¿¡åº¦ç³»ç»Ÿ

**ç½®ä¿¡åº¦èŒƒå›´**:

| èŒƒå›´ | å«ä¹‰ | è¡Œä¸º |
|------|------|------|
| **0.3-0.4** | è¯•æ¢æ€§ | ä»…å»ºè®®ï¼Œä¸ä¸»åŠ¨è§¦å‘ |
| **0.5-0.6** | ä¸­ç­‰ | åœ¨ç›¸å…³æƒ…å†µä¸‹å»ºè®® |
| **0.7-0.8** | é«˜ | ä¸»åŠ¨åº”ç”¨ |
| **0.9+** | éå¸¸é«˜ | å‡ ä¹æ€»æ˜¯åº”ç”¨ |

**ç½®ä¿¡åº¦æ›´æ–°**:

```javascript
// æˆåŠŸåº”ç”¨æ—¶
confidence = confidence + 0.05;  // æœ€é«˜åˆ° 0.9

// ç”¨æˆ·çº æ­£/å¦å®šæ—¶
confidence = confidence - 0.1;   // è¡°å‡

// é•¿æ—¶é—´æœªè§¦å‘
confidence = confidence * 0.98;  // æ¯å‘¨è¡°å‡ 2%
```

### æ¼”åŒ–è·¯å¾„

```mermaid
graph TB
    A[Observations] --> B[Single Instinct]
    B --> C{Triggered >= 3 times?}
    C -->|å¦| B
    C -->|æ˜¯| D[Cluster Similar Instincts]
    D --> E{3+ Related Instincts?}
    E -->|å¦| B
    E -->|æ˜¯| F[Evolution Analysis]
    F --> G{Evolution Type?}
    G -->|Pattern| H[Create Skill]
    G -->|Automation| I[Create Command]
    G -->|Orchestration| J[Create Agent]
    H --> K[~/.claude/homunculus/evolved/]
    I --> K
    J --> K
```

**ç¤ºä¾‹æ¼”åŒ–**:

```
Instinct 1: "prefer-functional-style" (confidence: 0.8)
Instinct 2: "avoid-stateful-classes" (confidence: 0.7)
Instinct 3: "use-pure-functions" (confidence: 0.75)
        â†“ Cluster
Evolved Skill: "functional-programming-patterns"
```

### åå°è§‚å¯Ÿè€…

**observer.js æ ¸å¿ƒé€»è¾‘**:

```javascript
// 1. å®šæœŸè¯»å– observations.jsonl
const observations = readObservations();

// 2. åˆ†ææ¨¡å¼
const patterns = analyzePatterns(observations);
// patterns = [
//   {
//     type: 'user_correction',
//     pattern: 'Functional over Class',
//     confidence: 0.7,
//     evidence: [...]
//   }
// ]

// 3. åˆ›å»ºæˆ–æ›´æ–° instincts
for (const pattern of patterns) {
  const existingInstinct = findInstinct(pattern);

  if (existingInstinct) {
    // æ›´æ–°ç°æœ‰ instinct
    updateInstinct(existingInstinct, pattern);
  } else {
    // åˆ›å»ºæ–° instinct
    createInstinct(pattern);
  }
}

// 4. æ£€æŸ¥æ¼”åŒ–æ¡ä»¶
checkEvolution();
```

### config.json v2 è¯¦è§£

```json
{
  "version": "2.0",

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // è§‚å¯Ÿé…ç½®
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "observation": {
    "enabled": true,
    "store_path": "~/.claude/homunculus/observations.jsonl",
    "max_file_size_mb": 10,      // è§‚å¯Ÿæ–‡ä»¶æœ€å¤§ 10MB
    "archive_after_days": 7,     // 7 å¤©åå½’æ¡£
    "capture_tools": [           // æ•è·çš„å·¥å…·
      "Edit", "Write", "Bash",
      "Read", "Grep", "Glob"
    ],
    "ignore_tools": ["TodoWrite"] // å¿½ç•¥çš„å·¥å…·
  },

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Instinct é…ç½®
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "instincts": {
    "personal_path": "~/.claude/homunculus/instincts/personal/",
    "inherited_path": "~/.claude/homunculus/instincts/inherited/",
    "min_confidence": 0.3,        // æœ€ä½ç½®ä¿¡åº¦
    "auto_approve_threshold": 0.7, // è‡ªåŠ¨æ‰¹å‡†é˜ˆå€¼
    "confidence_decay_rate": 0.02, // ç½®ä¿¡åº¦è¡°å‡ç‡ï¼ˆæ¯å‘¨ï¼‰
    "max_instincts": 100          // æœ€å¤š 100 ä¸ª instincts
  },

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // è§‚å¯Ÿè€…é…ç½®
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "observer": {
    "enabled": false,             // é»˜è®¤ç¦ç”¨ï¼ˆéœ€è¦æ‰‹åŠ¨å¯ç”¨ï¼‰
    "model": "haiku",            // ä½¿ç”¨ Haiku æ¨¡å‹ï¼ˆä¾¿å®œï¼‰
    "run_interval_minutes": 5,    // æ¯ 5 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡
    "min_observations_to_analyze": 20,  // è‡³å°‘ 20 ä¸ªè§‚å¯Ÿå†åˆ†æ
    "patterns_to_detect": [
      "user_corrections",
      "error_resolutions",
      "repeated_workflows",
      "tool_preferences",
      "file_patterns"
    ]
  },

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // æ¼”åŒ–é…ç½®
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "evolution": {
    "cluster_threshold": 3,       // 3 ä¸ªç›¸å…³ instincts è§¦å‘æ¼”åŒ–
    "evolved_path": "~/.claude/homunculus/evolved/",
    "auto_evolve": false          // æ‰‹åŠ¨æ‰¹å‡†æ¼”åŒ–
  },

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // é›†æˆé…ç½®
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  "integration": {
    "skill_creator_api": "https://skill-creator.app/api",
    "backward_compatible_v1": true  // å…¼å®¹ v1 learned skills
  }
}
```

---

## æœ€å°å®‰è£…æ–¹æ¡ˆ

### æ–¹æ¡ˆ A: ä½¿ç”¨ç°æœ‰ SessionEnd Hookï¼ˆæœ€ç®€å•ï¼‰

**å‰æ**: å·²å®‰è£… memory persistence hooks

**æ­¥éª¤**:

```bash
# 1. æ£€æŸ¥æ˜¯å¦å·²æœ‰ evaluate-session.js
ls ~/.claude/scripts/hooks/evaluate-session.js

# 2. å¦‚æœæœ‰ï¼Œåªéœ€æ·»åŠ  Stop hook é…ç½®
# ç¼–è¾‘ ~/.claude/settings.json
{
  "hooks": {
    "Stop": [{
      "matcher": "*",
      "hooks": [{
        "type": "command",
        "command": "node ~/.claude/scripts/hooks/evaluate-session.js"
      }],
      "description": "Evaluate session for patterns"
    }]
  }
}

# 3. åˆ›å»º learned skills ç›®å½•
mkdir -p ~/.claude/skills/learned

# 4. å®Œæˆï¼
```

**æ—¶é—´**: 2 åˆ†é’Ÿ

---

### æ–¹æ¡ˆ B: ç‹¬ç«‹å®‰è£… v1ï¼ˆæ¨èï¼‰

**æ­¥éª¤**:

```bash
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 1. åˆ›å»ºç›®å½•ç»“æ„
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

mkdir -p ~/.claude/skills/continuous-learning
mkdir -p ~/.claude/skills/learned

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 2. å¤åˆ¶æ–‡ä»¶
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

cd everything-claude-code

# å¤åˆ¶ skill æ–‡ä»¶
cp skills/continuous-learning/SKILL.md \
   ~/.claude/skills/continuous-learning/

cp skills/continuous-learning/config.json \
   ~/.claude/skills/continuous-learning/

cp skills/continuous-learning/evaluate-session.sh \
   ~/.claude/skills/continuous-learning/

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 3. è®¾ç½®æƒé™
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

chmod +x ~/.claude/skills/continuous-learning/evaluate-session.sh

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 4. é…ç½® Hook
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ç¼–è¾‘ ~/.claude/settings.jsonï¼Œæ·»åŠ :
{
  "hooks": {
    "Stop": [{
      "matcher": "*",
      "hooks": [{
        "type": "command",
        "command": "bash ~/.claude/skills/continuous-learning/evaluate-session.sh"
      }],
      "description": "Continuous learning - extract reusable patterns"
    }]
  }
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 5. éªŒè¯å®‰è£…
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# æµ‹è¯•è„šæœ¬
bash ~/.claude/skills/continuous-learning/evaluate-session.sh <<< '{}'
# åº”è¯¥è¾“å‡º: [ContinuousLearning] Session too short...

# æ£€æŸ¥ç›®å½•
ls -la ~/.claude/skills/learned/
```

**æ—¶é—´**: 5 åˆ†é’Ÿ

---

### æ–¹æ¡ˆ C: å®Œæ•´å®‰è£… v2ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰

**è­¦å‘Š**: âš ï¸ v2 è¾ƒå¤æ‚ï¼Œå»ºè®®å…ˆç†Ÿæ‚‰ v1

**æ­¥éª¤**:

```bash
# 1. å¤åˆ¶æ•´ä¸ª v2 ç›®å½•
cp -r everything-claude-code/skills/continuous-learning-v2 \
      ~/.claude/skills/

# 2. å®‰è£…ä¾èµ–
cd ~/.claude/skills/continuous-learning-v2
npm install

# 3. é…ç½® hooksï¼ˆéœ€è¦å¤šä¸ªï¼‰
# ç¼–è¾‘ ~/.claude/settings.json
{
  "hooks": {
    "PreToolUse": [{
      "matcher": "Edit|Write|Bash",
      "hooks": [{
        "type": "command",
        "command": "node ~/.claude/skills/continuous-learning-v2/hooks/pre-tool-use.js"
      }]
    }],
    "PostToolUse": [{
      "matcher": "Edit|Write|Bash",
      "hooks": [{
        "type": "command",
        "command": "node ~/.claude/skills/continuous-learning-v2/hooks/post-tool-use.js"
      }]
    }]
  }
}

# 4. å¯åŠ¨åå°è§‚å¯Ÿè€…ï¼ˆå¯é€‰ï¼‰
node ~/.claude/skills/continuous-learning-v2/scripts/observer.js --daemon

# 5. åˆ›å»ºç›®å½•
mkdir -p ~/.claude/homunculus/{observations,instincts/personal,instincts/inherited,evolved}
```

**æ—¶é—´**: 15 åˆ†é’Ÿ

**æ¨è**: **å…ˆç”¨æ–¹æ¡ˆ Bï¼ˆv1ï¼‰ï¼Œç†Ÿæ‚‰åå†è€ƒè™‘ v2**

---

## é…ç½®è¯¦è§£

### è°ƒä¼˜å»ºè®®

#### 1. è°ƒæ•´ä¼šè¯é•¿åº¦é˜ˆå€¼

```json
// é»˜è®¤é…ç½®
{
  "min_session_length": 10
}

// åœºæ™¯: æå–å¤ªå¤šå™ªéŸ³
{
  "min_session_length": 20  // æé«˜åˆ° 20
}

// åœºæ™¯: æå–å¤ªå°‘
{
  "min_session_length": 5   // é™ä½åˆ° 5
}
```

#### 2. è°ƒæ•´æå–é˜ˆå€¼

```json
// ä¿å®ˆï¼ˆå‡å°‘å™ªéŸ³ï¼‰
{
  "extraction_threshold": "high",
  "min_session_length": 15
}

// æ¿€è¿›ï¼ˆæ•è·æ›´å¤šï¼‰
{
  "extraction_threshold": "low",
  "min_session_length": 5
}

// å¹³è¡¡ï¼ˆæ¨èï¼‰
{
  "extraction_threshold": "medium",
  "min_session_length": 10
}
```

#### 3. è‡ªåŠ¨æ‰¹å‡†è®¾ç½®

```json
// åˆå­¦è€…ï¼ˆæ‰‹åŠ¨æ‰¹å‡†ï¼‰
{
  "auto_approve": false
}
// æ¯æ¬¡è¯¢é—®: "æ˜¯å¦ä¿å­˜è¿™ä¸ªæ¨¡å¼ï¼Ÿ"

// é«˜çº§ç”¨æˆ·ï¼ˆè‡ªåŠ¨æ‰¹å‡†ï¼‰
{
  "auto_approve": true
}
// è‡ªåŠ¨ä¿å­˜ï¼Œå®šæœŸå®¡æŸ¥
```

### æ¨¡å¼è¿‡æ»¤

#### patterns_to_detectï¼ˆè¦æ£€æµ‹çš„ï¼‰

```json
{
  "patterns_to_detect": [
    // âœ… æ¨èå¯ç”¨
    "error_resolution",      // é”™è¯¯è§£å†³æ–¹æ¡ˆï¼ˆé«˜ä»·å€¼ï¼‰
    "user_corrections",      // ç”¨æˆ·çº æ­£ï¼ˆé«˜ä»·å€¼ï¼‰
    "workarounds",          // å˜é€šæ–¹æ¡ˆï¼ˆä¸­ä»·å€¼ï¼‰
    "debugging_techniques",  // è°ƒè¯•æŠ€æœ¯ï¼ˆä¸­ä»·å€¼ï¼‰

    // âš ï¸ å¯é€‰
    "project_specific",     // é¡¹ç›®ç‰¹å®šï¼ˆå¯èƒ½å™ªéŸ³ï¼‰
    "tool_preferences",     // å·¥å…·åå¥½ï¼ˆä½ä»·å€¼ï¼‰
    "file_patterns"        // æ–‡ä»¶æ¨¡å¼ï¼ˆä½ä»·å€¼ï¼‰
  ]
}
```

#### ignore_patternsï¼ˆè¦å¿½ç•¥çš„ï¼‰

```json
{
  "ignore_patterns": [
    // âœ… æ¨èå¿½ç•¥
    "simple_typos",         // æ‹¼å†™é”™è¯¯
    "one_time_fixes",       // ä¸€æ¬¡æ€§ä¿®å¤
    "external_api_issues",  // å¤–éƒ¨ APIï¼ˆä½ æ— æ³•æ§åˆ¶ï¼‰

    // âš ï¸ è€ƒè™‘å¿½ç•¥
    "temporary_debugging",  // ä¸´æ—¶è°ƒè¯•ä»£ç 
    "experimental_code"    // å®éªŒæ€§ä»£ç 
  ]
}
```

---

## å®é™…ä½¿ç”¨

### å®Œæ•´å·¥ä½œæµç¨‹

#### ç¬¬ä¸€æ¬¡é‡åˆ°é—®é¢˜

```bash
$ claude

You: "å®ç° JWT è®¤è¯ï¼Œtoken 15 åˆ†é’Ÿè¿‡æœŸ"

Claude: "æˆ‘ä¼šä½¿ç”¨ jsonwebtoken åº“å®ç°..."

[å®ç°ä»£ç ]
const token = jwt.sign(payload, secret, {
  expiresIn: Date.now() + 900000  // 15 åˆ†é’Ÿ = 900000 æ¯«ç§’
});

You: "æµ‹è¯•ä¸€ä¸‹"

Claude: [è¿è¡Œæµ‹è¯•]
âŒ æµ‹è¯•å¤±è´¥: Token ç«‹å³è¿‡æœŸ

You: "ä¸ºä»€ä¹ˆ token ç«‹å³è¿‡æœŸï¼Ÿ"

Claude: "è®©æˆ‘æ£€æŸ¥... å¯èƒ½æ˜¯ expiresIn æ ¼å¼é—®é¢˜..."

[è°ƒè¯• 30 åˆ†é’Ÿ]

You: "åº”è¯¥ç”¨å­—ç¬¦ä¸²æ ¼å¼ '15m'ï¼Œä¸æ˜¯æ¯«ç§’æ•°"

Claude: "æ˜ç™½äº†ï¼Œä¿®å¤ï¼š
const token = jwt.sign(payload, secret, {
  expiresIn: '15m'  // å­—ç¬¦ä¸²æ ¼å¼
});

âœ… æµ‹è¯•é€šè¿‡

Ctrl+D
[Stop Hook] Session has 12 messages - evaluate for extractable patterns
```

**ä¼šè¯æ‘˜è¦**:
- æ¶ˆæ¯æ•°: 12
- é—®é¢˜: JWT token ç«‹å³è¿‡æœŸ
- è§£å†³: ä½¿ç”¨å­—ç¬¦ä¸²æ ¼å¼ `'15m'` è€Œä¸æ˜¯æ¯«ç§’æ•°
- æ—¶é—´: 30 åˆ†é’Ÿ

---

#### ç¬¬äºŒæ¬¡é‡åˆ°é—®é¢˜ï¼ˆå‡ å¤©åï¼‰

```bash
$ claude

You: "æ·»åŠ åˆ·æ–° token åŠŸèƒ½ï¼Œ7 å¤©è¿‡æœŸ"

Claude: "å®ç°åˆ·æ–° token..."

[å®ç°ä»£ç ]
const refreshToken = jwt.sign(payload, secret, {
  expiresIn: Date.now() + 604800000  // 7 å¤©æ¯«ç§’
});

You: "æµ‹è¯•"

âŒ åˆæ˜¯ç«‹å³è¿‡æœŸ

You: "åˆæ˜¯è¿™ä¸ªé—®é¢˜ï¼Œåº”è¯¥ç”¨å­—ç¬¦ä¸² '7d'"

Claude: "å¯¹ä¸èµ·ï¼Œä¿®å¤ï¼š
const refreshToken = jwt.sign(payload, secret, {
  expiresIn: '7d'
});

âœ… æµ‹è¯•é€šè¿‡

Ctrl+D
[Stop Hook] Session has 10 messages - evaluate for extractable patterns
```

**ä¼šè¯æ‘˜è¦**:
- æ¶ˆæ¯æ•°: 10
- é—®é¢˜: ç›¸åŒé—®é¢˜ï¼ˆJWT expiry formatï¼‰
- è§£å†³: ç›¸åŒæ–¹æ¡ˆï¼ˆå­—ç¬¦ä¸²æ ¼å¼ï¼‰
- æ—¶é—´: 20 åˆ†é’Ÿ

---

#### ç³»ç»Ÿå­¦ä¹ ï¼ˆä¼šè¯ç»“æŸåï¼‰

```bash
[Continuous Learning åˆ†æä¸¤æ¬¡ä¼šè¯]

å‘ç°æ¨¡å¼:
- é—®é¢˜: JWT expiresIn æ ¼å¼é”™è¯¯
- å‡ºç°æ¬¡æ•°: 2
- è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨å­—ç¬¦ä¸²æ ¼å¼
- ç”¨æˆ·çº æ­£æ¬¡æ•°: 2

Claude: "æˆ‘æ³¨æ„åˆ°ä¸€ä¸ªå¯å¤ç”¨çš„æ¨¡å¼ï¼š

**JWT Token Expiry Format**
- é—®é¢˜: ä½¿ç”¨æ¯«ç§’æ•°å¯¼è‡´ç«‹å³è¿‡æœŸ
- è§£å†³: ä½¿ç”¨å­—ç¬¦ä¸²æ ¼å¼ ('15m', '7d')
- å‡ºç°: 2 æ¬¡
- ç½®ä¿¡åº¦: é«˜

æ˜¯å¦ä¿å­˜ä¸º learned skillï¼Ÿ [y/n]"

You: "y"

[åˆ›å»ºæ–‡ä»¶]
~/.claude/skills/learned/jwt-expiry-format.md

âœ… Learned skill å·²ä¿å­˜
```

---

#### ç¬¬ä¸‰æ¬¡ï¼ˆè‡ªåŠ¨åº”ç”¨ï¼‰

```bash
$ claude

[SessionStart åŠ è½½ learned skills]
[SessionStart] 5 learned skill(s) available
  - jwt-expiry-format
  - ...

You: "å®ç° API å¯†é’¥çš„è¿‡æœŸæœºåˆ¶ï¼Œ30 å¤©æœ‰æ•ˆæœŸ"

Claude: "å®ç° API å¯†é’¥è¿‡æœŸæœºåˆ¶ã€‚

æ³¨æ„ï¼šæ ¹æ®ä¹‹å‰å­¦åˆ°çš„ jwt-expiry-format æ¨¡å¼ï¼Œ
æˆ‘ä¼šç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²æ ¼å¼é¿å…è¿‡æœŸé—®é¢˜ã€‚

const apiKey = generateApiKey(userId, {
  expiresIn: '30d'  // âœ… å­—ç¬¦ä¸²æ ¼å¼
});

âœ… 2 åˆ†é’Ÿå®Œæˆï¼Œæ— éœ€è°ƒè¯•
```

**æ•ˆæœ**:
- âœ… è‡ªåŠ¨åº”ç”¨ learned skill
- âœ… é¿å…äº† 30 åˆ†é’Ÿçš„è°ƒè¯•
- âœ… ç¬¬ä¸€æ¬¡å°±æ­£ç¡®

---

### å®é™…è¾“å‡ºç¤ºä¾‹

#### Stop Hook è¾“å‡º

```
[ContinuousLearning] Session has 15 messages - evaluate for extractable patterns
[ContinuousLearning] Save learned skills to: ~/.claude/skills/learned/
```

#### æ¨¡å¼è¯†åˆ«è¾“å‡º

```
[Pattern Detection] Analyzing session transcript...

Found potential patterns:
1. error_resolution: JWT expiresIn format (confidence: high)
   - Observed: 2 times
   - User corrections: 2 times
   - Consistent solution: Use string format

2. debugging_technique: Check version mismatch (confidence: medium)
   - Observed: 1 time
   - Context: jsonwebtoken v9 breaking change

Recommend saving pattern #1 as learned skill.
```

#### Learned Skill åˆ›å»º

```
Creating learned skill: jwt-expiry-format.md

Content:
---
name: jwt-expiry-format
description: JWT token expiresIn must use string format
pattern: error_resolution
confidence: high
observations: 2
---

# JWT Token Expiry Format Issue
...

âœ… Saved to: ~/.claude/skills/learned/jwt-expiry-format.md
```

---

## æ¨¡å¼ç±»å‹

### è¯¦ç»†åˆ†ç±»

#### 1. error_resolutionï¼ˆé”™è¯¯è§£å†³ï¼‰

**ç‰¹å¾**:
- é‡åˆ°é”™è¯¯
- è°ƒè¯•è¿‡ç¨‹
- æ‰¾åˆ°è§£å†³æ–¹æ¡ˆ

**ç¤ºä¾‹**:
```markdown
# Pattern: Module Import Error in Node.js

## Problem
Error: Cannot find module 'X'

## Cause
Using ES6 import syntax in CommonJS project

## Solution
Use require() instead:
```javascript
// âŒ Error
import X from 'X';

// âœ… Works
const X = require('X');
```

## When to Apply
- Node.js projects without "type": "module"
- CommonJS environment
```

---

#### 2. user_correctionsï¼ˆç”¨æˆ·çº æ­£ï¼‰

**ç‰¹å¾**:
- Claude å»ºè®® A
- ç”¨æˆ·çº æ­£ä¸º B
- B è¢«è¯æ˜æ­£ç¡®

**ç¤ºä¾‹**:
```markdown
# Pattern: Prefer Immutable Updates

## Claude's Initial Approach
```javascript
// Claude å»ºè®®ï¼šç›´æ¥ä¿®æ”¹
array.push(item);
```

## User Correction
```javascript
// ç”¨æˆ·çº æ­£ï¼šä¸å¯å˜æ›´æ–°
const newArray = [...array, item];
```

## Rationale
- Avoids side effects
- Easier to debug
- Better for React state

## When to Apply
- State management
- Functional programming contexts
```

---

#### 3. workaroundsï¼ˆå˜é€šæ–¹æ¡ˆï¼‰

**ç‰¹å¾**:
- æ¡†æ¶/åº“çš„é™åˆ¶æˆ– bug
- æ‰¾åˆ°æ›¿ä»£æ–¹æ¡ˆ

**ç¤ºä¾‹**:
```markdown
# Pattern: Next.js Dynamic Import with SSR

## Problem
Component uses browser-only APIs, breaks SSR

## Workaround
Use dynamic import with ssr: false:
```javascript
const ClientComponent = dynamic(
  () => import('./ClientComponent'),
  { ssr: false }
);
```

## When to Apply
- Components using window, document, localStorage
- Third-party libraries without SSR support
```

---

#### 4. debugging_techniquesï¼ˆè°ƒè¯•æŠ€æœ¯ï¼‰

**ç‰¹å¾**:
- æœ‰æ•ˆçš„è°ƒè¯•æ–¹æ³•
- å¯å¤ç”¨çš„è°ƒè¯•æ­¥éª¤

**ç¤ºä¾‹**:
```markdown
# Pattern: Debug React Re-renders

## Technique
Use why-did-you-render library:

```javascript
import whyDidYouRender from '@welldone-software/why-did-you-render';

if (process.env.NODE_ENV === 'development') {
  whyDidYouRender(React, {
    trackAllPureComponents: true,
  });
}
```

## What It Shows
- Which components re-rendered
- Why they re-rendered
- Props that changed

## When to Apply
- Performance debugging
- Unexpected re-renders
```

---

#### 5. project_specificï¼ˆé¡¹ç›®ç‰¹å®šï¼‰

**ç‰¹å¾**:
- é¡¹ç›®ç‰¹æœ‰çš„çº¦å®š
- å›¢é˜Ÿåå¥½
- ä»£ç é£æ ¼

**ç¤ºä¾‹**:
```markdown
# Pattern: API Error Handling in Our Project

## Convention
All API errors follow this format:

```typescript
interface ApiError {
  code: string;        // ERROR_CODE_FORMAT
  message: string;     // User-friendly message
  details?: object;    // Debug info (dev only)
  timestamp: string;   // ISO 8601
}
```

## Usage
```typescript
throw new ApiError({
  code: 'AUTH_TOKEN_EXPIRED',
  message: 'Your session has expired',
  details: { tokenAge: '3600s' },
  timestamp: new Date().toISOString()
});
```

## When to Apply
- All API routes in src/api/
- Error middleware
```

---

### ä¼˜å…ˆçº§å»ºè®®

| æ¨¡å¼ç±»å‹ | ä»·å€¼ | ä¼˜å…ˆä¿å­˜ |
|---------|------|---------|
| **error_resolution** | â­â­â­â­â­ | æ€»æ˜¯ |
| **user_corrections** | â­â­â­â­â­ | æ€»æ˜¯ |
| **workarounds** | â­â­â­â­ | é€šå¸¸ |
| **debugging_techniques** | â­â­â­ | æœ‰ç”¨æ—¶ |
| **project_specific** | â­â­ | è°¨æ…ï¼ˆå¯èƒ½å™ªéŸ³ï¼‰ |

---

## æœ€ä½³å®è·µ

### 1. ä»ä¿å®ˆè®¾ç½®å¼€å§‹

```json
{
  "min_session_length": 15,          // è¾ƒé«˜é˜ˆå€¼
  "extraction_threshold": "high",    // åªæå–æ˜æ˜¾æ¨¡å¼
  "auto_approve": false              // æ‰‹åŠ¨å®¡æŸ¥
}
```

**åŸå› **:
- âœ… å‡å°‘å™ªéŸ³
- âœ… å»ºç«‹ä¿¡ä»»
- âœ… å­¦ä¹ è¯†åˆ«å¥½æ¨¡å¼

**é€æ­¥æ”¾å®½**:
```
ç¬¬ 1 å‘¨: high threshold, manual approve
ç¬¬ 2 å‘¨: medium threshold, manual approve
ç¬¬ 3+ å‘¨: medium threshold, auto approve (å¯é€‰)
```

### 2. å®šæœŸå®¡æŸ¥ Learned Skills

```bash
# æ¯å‘¨å®¡æŸ¥ä¸€æ¬¡
cd ~/.claude/skills/learned

# æŸ¥çœ‹æ‰€æœ‰ skills
ls -lah

# å®¡æŸ¥æ¯ä¸ª skill
for skill in *.md; do
  echo "=== $skill ==="
  head -20 "$skill"
  echo ""
done

# åˆ é™¤è¿‡æ—¶çš„
rm obsolete-pattern.md

# ç¼–è¾‘æ”¹è¿›
nano useful-pattern.md
```

**å®¡æŸ¥æ¸…å•**:
- [ ] æ¨¡å¼æ˜¯å¦ä»ç„¶ç›¸å…³ï¼Ÿ
- [ ] æè¿°æ˜¯å¦æ¸…æ™°ï¼Ÿ
- [ ] ç¤ºä¾‹æ˜¯å¦æœ‰æ•ˆï¼Ÿ
- [ ] ç½®ä¿¡åº¦æ˜¯å¦å‡†ç¡®ï¼Ÿ
- [ ] è§¦å‘æ¡ä»¶æ˜¯å¦æ˜ç¡®ï¼Ÿ

### 3. ç»™ Skills æ·»åŠ ä¸Šä¸‹æ–‡

**åŸºç¡€ skill** (è‡ªåŠ¨ç”Ÿæˆ):
```markdown
# JWT Expiry Format

## Solution
Use string format for expiresIn:
```javascript
expiresIn: '15m'
```
```

**æ”¹è¿› skill** (æ‰‹åŠ¨å¢å¼º):
```markdown
# JWT Expiry Format Issue

## Problem Context
jsonwebtoken v9.x breaking change from v8.x

## Root Cause
v9 changed expiresIn to require string format.
v8 accepted both numbers and strings.

## Solution
âŒ v8 style (breaks in v9):
```javascript
expiresIn: Date.now() + 900000
expiresIn: 900000
```

âœ… v9 style (works in both):
```javascript
expiresIn: '15m'
expiresIn: '7d'
expiresIn: '2h'
```

## Valid Formats
- Seconds: '60s'
- Minutes: '15m', '30m'
- Hours: '1h', '2h'
- Days: '7d', '30d'

## Related Files
- src/services/token.service.js
- tests/auth/token.test.js

## Migration Guide
If upgrading from v8:
1. Search for: `expiresIn:\s*\d+`
2. Replace with string format
3. Run tests

## When to Apply
- Implementing JWT auth
- Upgrading jsonwebtoken
- Debugging token expiry
- Code reviews (check format)
```

**ä»·å€¼**:
- âœ… æ›´æ¸…æ™°çš„ä¸Šä¸‹æ–‡
- âœ… å¯æ“ä½œçš„æ­¥éª¤
- âœ… ç›¸å…³æ–‡ä»¶å¼•ç”¨
- âœ… è¿ç§»æŒ‡å—

### 4. ç‰ˆæœ¬æ§åˆ¶ Learned Skills

**é¡¹ç›®çº§ skills**:

```bash
# åœ¨é¡¹ç›®ä¸­åˆ›å»ºç›®å½•
mkdir -p .claude/skills/learned

# å¤åˆ¶é‡è¦çš„é¡¹ç›®ç‰¹å®š skills
cp ~/.claude/skills/learned/project-* .claude/skills/learned/

# çº³å…¥ç‰ˆæœ¬æ§åˆ¶
git add .claude/skills/learned/
git commit -m "docs: add learned skills for team"

# .gitignore ä¸­æ’é™¤ä¸ªäºº skills
echo ".claude/skills/learned/personal-*" >> .gitignore
```

**å¥½å¤„**:
- âœ… å›¢é˜Ÿå…±äº«çŸ¥è¯†
- âœ… æ–°æˆå‘˜å¿«é€Ÿä¸Šæ‰‹
- âœ… è¿½è¸ªæ¨¡å¼æ¼”å˜
- âœ… ä»£ç å®¡æŸ¥å‚è€ƒ

### 5. ä¸å…¶ä»–ç³»ç»Ÿé…åˆ

**ä¸ Memory Persistence é…åˆ**:

```
SessionEnd Hook
    â†“ ä¿å­˜ä¼šè¯æ‘˜è¦
Continuous Learning
    â†“ è¯„ä¼°æ¨¡å¼
    â†“ ä¿å­˜ Learned Skills
SessionStart Hook
    â†“ åŠ è½½
    - ä¼šè¯æ‘˜è¦
    - Learned skills
    â†“ å®Œæ•´ä¸Šä¸‹æ–‡
```

**ä¸ Strategic Compact é…åˆ**:

```
å·¥ä½œä¸­... (å·¥å…·è°ƒç”¨è®¡æ•°)
    â†“ è¾¾åˆ° 50 æ¬¡
Strategic Compact å»ºè®®
    â†“ ç”¨æˆ·å†³å®š
/compact
    â†“ å‹ç¼©å‰
PreCompact Hook ä¿å­˜çŠ¶æ€
    â†“ å‹ç¼©åç»§ç»­
ç»§ç»­å·¥ä½œ...
    â†“ ä¼šè¯ç»“æŸ
Continuous Learning è¯„ä¼°
```

**ååŒæ•ˆæœ**:
- ğŸ“ ä¼šè¯æ‘˜è¦ â†’ çŸ¥é“ä½ åšäº†ä»€ä¹ˆ
- ğŸ§  Learned skills â†’ çŸ¥é“å¦‚ä½•åš
- ğŸ”„ Strategic compact â†’ é«˜æ•ˆçš„ä¸Šä¸‹æ–‡ç®¡ç†

---

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: Hook ä¸è§¦å‘

**ç—‡çŠ¶**:
```bash
# ä¼šè¯ç»“æŸåæ²¡æœ‰çœ‹åˆ°
[ContinuousLearning] Session has X messages...
```

**è¯Šæ–­**:

```bash
# 1. æ£€æŸ¥ hook é…ç½®
cat ~/.claude/settings.json | grep -A 10 "Stop"

# 2. æ£€æŸ¥è„šæœ¬å­˜åœ¨
ls -la ~/.claude/skills/continuous-learning/evaluate-session.sh

# 3. æ£€æŸ¥æƒé™
ls -l ~/.claude/skills/continuous-learning/evaluate-session.sh
# åº”è¯¥æ˜¾ç¤º -rwxr-xr-x (å¯æ‰§è¡Œ)

# 4. æ‰‹åŠ¨æµ‹è¯•è„šæœ¬
bash ~/.claude/skills/continuous-learning/evaluate-session.sh <<< '{}'
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä¿®å¤æƒé™
chmod +x ~/.claude/skills/continuous-learning/evaluate-session.sh

# éªŒè¯ hook é…ç½®
nano ~/.claude/settings.json
# ç¡®ä¿è·¯å¾„æ­£ç¡®
```

---

### é—®é¢˜ 2: ä¼šè¯å¤ªçŸ­è¢«è·³è¿‡

**ç—‡çŠ¶**:
```
[ContinuousLearning] Session too short (5 messages), skipping
```

**åŸå› **:
- ä¼šè¯æ¶ˆæ¯æ•° < min_session_lengthï¼ˆé»˜è®¤ 10ï¼‰

**è§£å†³æ–¹æ¡ˆ**:

```json
// é™ä½é˜ˆå€¼
{
  "min_session_length": 5  // ä» 10 é™åˆ° 5
}
```

**æˆ–**: è¿›è¡Œæ›´é•¿çš„ä¼šè¯ï¼ˆ>= 10 æ¡æ¶ˆæ¯ï¼‰

---

### é—®é¢˜ 3: æ²¡æœ‰è¯†åˆ«åˆ°æ¨¡å¼

**ç—‡çŠ¶**:
- Hook è§¦å‘äº†
- ä½† Claude æ²¡æœ‰è¯†åˆ«åˆ°å¯å¤ç”¨æ¨¡å¼

**å¯èƒ½åŸå› **:

1. **æ¨¡å¼ä¸å¤Ÿæ˜æ˜¾**
   - åªå‡ºç° 1 æ¬¡
   - æ²¡æœ‰ç”¨æˆ·çº æ­£
   - è§£å†³æ–¹æ¡ˆä¸ä¸€è‡´

2. **extraction_threshold å¤ªé«˜**
   ```json
   {
     "extraction_threshold": "high"  // å¤ªä¿å®ˆ
   }
   ```

3. **æ¨¡å¼è¢«å¿½ç•¥**
   ```json
   {
     "ignore_patterns": ["..."]  // æ£€æŸ¥æ˜¯å¦è¿‡åº¦å¿½ç•¥
   }
   ```

**è§£å†³æ–¹æ¡ˆ**:

```json
// é™ä½é˜ˆå€¼
{
  "extraction_threshold": "medium",
  "min_session_length": 10
}

// å‡å°‘å¿½ç•¥æ¨¡å¼
{
  "ignore_patterns": [
    "simple_typos"  // åªä¿ç•™æ˜ç¡®è¦å¿½ç•¥çš„
  ]
}
```

---

### é—®é¢˜ 4: æå–äº†å¤ªå¤šå™ªéŸ³

**ç—‡çŠ¶**:
- æ¯æ¬¡ä¼šè¯éƒ½åˆ›å»º skill
- å¾ˆå¤š skill ä¸å®ç”¨

**è§£å†³æ–¹æ¡ˆ**:

```json
// æé«˜é˜ˆå€¼
{
  "min_session_length": 20,
  "extraction_threshold": "high",
  "auto_approve": false  // æ‰‹åŠ¨æ‰¹å‡†
}

// å¢åŠ å¿½ç•¥æ¨¡å¼
{
  "ignore_patterns": [
    "simple_typos",
    "one_time_fixes",
    "external_api_issues",
    "temporary_debugging",    // æ–°å¢
    "experimental_code"       // æ–°å¢
  ]
}
```

**å®šæœŸæ¸…ç†**:
```bash
# åˆ é™¤ä½ä»·å€¼ skills
cd ~/.claude/skills/learned
rm noise-pattern-*.md
```

---

### é—®é¢˜ 5: jq æœªå®‰è£…ï¼ˆBash ç‰ˆæœ¬ï¼‰

**ç—‡çŠ¶**:
```
[ContinuousLearning] jq is required but not installed, using defaults
```

**å½±å“**: æ— æ³•è¯»å– config.jsonï¼Œä½¿ç”¨é»˜è®¤å€¼

**è§£å†³æ–¹æ¡ˆ**:

```bash
# macOS
brew install jq

# Ubuntu/Debian
sudo apt-get install jq

# CentOS/RHEL
sudo yum install jq

# Windows (WSL)
sudo apt-get install jq

# éªŒè¯å®‰è£…
jq --version
```

---

## æ€»ç»“

### æ ¸å¿ƒä»·å€¼ä¸»å¼ 

```
æ²¡æœ‰æŒç»­å­¦ä¹ :
  é—®é¢˜ 1: 30 åˆ†é’Ÿ
  é—®é¢˜ 2: 20 åˆ†é’Ÿ
  é—®é¢˜ 3: 15 åˆ†é’Ÿ
  é—®é¢˜ 4+: æ¯æ¬¡ 15 åˆ†é’Ÿ
  âŒ æŒç»­æµªè´¹æ—¶é—´

æœ‰æŒç»­å­¦ä¹ :
  é—®é¢˜ 1-2: 50 åˆ†é’Ÿï¼ˆå­¦ä¹ æœŸï¼‰
  é—®é¢˜ 3+: 2 åˆ†é’Ÿ/æ¬¡
  âœ… èŠ‚çœ: 13 åˆ†é’Ÿ/æ¬¡ Ã— N æ¬¡

  10 æ¬¡å: èŠ‚çœ 130 åˆ†é’Ÿ ğŸ’°
  50 æ¬¡å: èŠ‚çœ 650 åˆ†é’Ÿ ğŸ’°ğŸ’°
  100 æ¬¡å: èŠ‚çœ 1300 åˆ†é’Ÿ ğŸ’°ğŸ’°ğŸ’°
```

### ç‰ˆæœ¬é€‰æ‹©

| åœºæ™¯ | æ¨èç‰ˆæœ¬ | åŸå›  |
|------|---------|------|
| **åˆå­¦è€…** | v1 | ç®€å•ã€å¯é ã€å¤Ÿç”¨ |
| **æ—¥å¸¸ä½¿ç”¨** | v1 | æœ€ä½³æ€§ä»·æ¯” |
| **é«˜çº§ç”¨æˆ·** | v2 | æ›´ç²¾ç»†æ§åˆ¶ |
| **ç ”ç©¶/å®éªŒ** | v2 | æœ€å…ˆè¿›ç‰¹æ€§ |

**æ¨èè·¯å¾„**: v1 â†’ (ç†Ÿæ‚‰å) â†’ v2

### æœ€å°å®‰è£…æ¸…å•

**æ–‡ä»¶**:
- [ ] `~/.claude/skills/continuous-learning/evaluate-session.sh`
- [ ] `~/.claude/skills/continuous-learning/config.json`
- [ ] `~/.claude/skills/learned/` ç›®å½•

**é…ç½®**:
- [ ] `~/.claude/settings.json` ä¸­çš„ Stop hook

**æµ‹è¯•**:
- [ ] è¿›è¡Œ >= 10 æ¶ˆæ¯çš„ä¼šè¯
- [ ] çœ‹åˆ° `[ContinuousLearning]` æ—¥å¿—
- [ ] åˆ›å»ºç¬¬ä¸€ä¸ª learned skill

### æœ€ä½³å®è·µæ¸…å•

- [ ] ä»ä¿å®ˆè®¾ç½®å¼€å§‹
- [ ] å®šæœŸå®¡æŸ¥ learned skills
- [ ] æ‰‹åŠ¨å¢å¼º skill å†…å®¹
- [ ] ç‰ˆæœ¬æ§åˆ¶é¡¹ç›® skills
- [ ] ä¸å…¶ä»–ç³»ç»Ÿé…åˆä½¿ç”¨
- [ ] ç›‘æ§å’Œè°ƒä¼˜é˜ˆå€¼
- [ ] å›¢é˜Ÿå…±äº«æœ‰ä»·å€¼çš„ skills

### å…³é”®æŒ‡æ ‡

**æˆåŠŸæ ‡å¿—**:
- âœ… æ¯æœˆåˆ›å»º 2-5 ä¸ª learned skills
- âœ… é‡å¤é—®é¢˜è§£å†³æ—¶é—´å‡å°‘ > 50%
- âœ… Skills è¢«å®é™…åº”ç”¨ï¼ˆä¸åªæ˜¯å­˜å‚¨ï¼‰
- âœ… å›¢é˜Ÿæˆå‘˜æŠ¥å‘Šç”Ÿäº§åŠ›æå‡

**è­¦å‘Šä¿¡å·**:
- âŒ æ¯å‘¨åˆ›å»º > 10 ä¸ª skillsï¼ˆå¯èƒ½å¤ªå¤šå™ªéŸ³ï¼‰
- âŒ Skills ä»ä¸è¢«ä½¿ç”¨ï¼ˆæå–ä¸å½“ï¼‰
- âŒ Skills å†…å®¹å¤ªç®€å•ï¼ˆé˜ˆå€¼å¤ªä½ï¼‰
- âŒ Hook é¢‘ç¹å¤±è´¥ï¼ˆé…ç½®é—®é¢˜ï¼‰

---

## å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£

**Repo ä½ç½®**:
- v1: `skills/continuous-learning/`
- v2: `skills/continuous-learning-v2/`

**å¼•ç”¨**:
- `the-longform-guide.md` (ç¬¬ 89-102 è¡Œ)
- `hooks/README.md`

### ç›¸å…³é¡¹ç›®

**Homunculus v2** (çµæ„Ÿæ¥æº):
- https://github.com/humanplane/homunculus
- Instinct-based learning çš„å…ˆé©±

### ç¤¾åŒºèµ„æº

**è®¨è®º**:
- [Anthropic: Demystifying evals](https://www.anthropic.com/engineering/demystifying-evals-for-ai-agents)
- [Session Reflection Pattern](https://rlancemartin.github.io/2025/12/01/claude_diary/)

---

## é™„å½•

### A. Learned Skill æ¨¡æ¿

```markdown
---
name: [pattern-name]
description: [brief description]
pattern: [error_resolution|user_corrections|workarounds|debugging_techniques|project_specific]
confidence: [low|medium|high]
created: YYYY-MM-DD
updated: YYYY-MM-DD
observations: N
---

# [Pattern Title]

## Problem
[What goes wrong]

## Root Cause
[Why it happens]

## Solution

âŒ **Wrong**:
```[language]
[incorrect code]
```

âœ… **Correct**:
```[language]
[correct code]
```

## Evidence
- Observed in N sessions
- Dates: [dates]
- User corrections: N times
- Tests confirmed: [yes/no]

## Related
- [Related files/docs]

## When to Apply
- [Specific scenarios]
```

### B. å¿«é€Ÿå‚è€ƒå¡

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Continuous Learning - Quick Reference                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ç‰ˆæœ¬é€‰æ‹©                                               â•‘
â•‘  v1: Simple, reliable (æ¨èåˆå­¦è€…)                     â•‘
â•‘  v2: Advanced, instinct-based (é«˜çº§ç”¨æˆ·)              â•‘
â•‘                                                        â•‘
â•‘  æœ€å°å®‰è£… (v1)                                         â•‘
â•‘  1. å¤åˆ¶ evaluate-session.sh                          â•‘
â•‘  2. é…ç½® Stop hook                                     â•‘
â•‘  3. åˆ›å»º learned ç›®å½•                                  â•‘
â•‘                                                        â•‘
â•‘  é…ç½®è°ƒä¼˜                                               â•‘
â•‘  ä¿å®ˆ: min_length=15, threshold=high                   â•‘
â•‘  å¹³è¡¡: min_length=10, threshold=medium  âœ…             â•‘
â•‘  æ¿€è¿›: min_length=5, threshold=low                     â•‘
â•‘                                                        â•‘
â•‘  æ¨¡å¼ä¼˜å…ˆçº§                                             â•‘
â•‘  â­â­â­â­â­ error_resolution                              â•‘
â•‘  â­â­â­â­â­ user_corrections                              â•‘
â•‘  â­â­â­â­  workarounds                                   â•‘
â•‘  â­â­â­   debugging_techniques                          â•‘
â•‘  â­â­    project_specific                               â•‘
â•‘                                                        â•‘
â•‘  æ–‡ä»¶ä½ç½®                                               â•‘
â•‘  ~/.claude/skills/learned/                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2026-02-21 19:24:10
**åˆ†æä½œè€…**: Claude Sonnet 4.5 (AI Assistant)
**åŸºäºç‰ˆæœ¬**: everything-claude-code (latest commit)
**æ¨èç‰ˆæœ¬**: v1 (Simple & Reliable)
